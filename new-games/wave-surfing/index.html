<!DOCTYPE html>
<html>
<head>
    <title>íŒŒë„íƒ€ê¸° ì„œí•‘ ê²Œì„</title>
    
    <!-- Google Analytics -->
    <script src="../../analytics.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        h1 {
            font-size: 3rem;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            animation: wave 2s ease-in-out infinite;
        }
        
        @keyframes wave {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }
        
        .game-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        canvas {
            border: 4px solid #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 100%);
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            min-width: 200px;
        }
        
        .info-item {
            margin: 15px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        button {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            backdrop-filter: blur(5px);
        }
        
        #secretMessage {
            display: none;
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: bold;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <h1>ğŸŒŠ íŒŒë„íƒ€ê¸° ì„œí•‘</h1>
    
    <div class="instructions">
        <p><strong>ğŸ® ê²Œì„ ë°©ë²•:</strong></p>
        <p>í™”ì‚´í‘œ í‚¤ë¡œ ì„œí¼ë¥¼ ì¡°ì¢…í•´ì„œ íŒŒë„ë¥¼ íƒ€ì„¸ìš”!</p>
        <p>ì¥ì• ë¬¼ì„ í”¼í•˜ê³  íŠ¸ë¦­ì„ ì„±ê³µì‹œì¼œ ì ìˆ˜ë¥¼ ì–»ìœ¼ì„¸ìš”!</p>
        <p>ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ì í”„í•´ì„œ ë©‹ì§„ íŠ¸ë¦­ì„ í•´ë³´ì„¸ìš”!</p>
        <p>ğŸ’– ë¹„ë°€: "ì„œë¯¼ì¬ì‚¬ë‘í•´"ë¥¼ ì…ë ¥í•˜ë©´ íŠ¹ë³„í•œ ì¼ì´...?</p>
    </div>
    
    <div class="game-container">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        
        <div class="game-info">
            <div class="info-item">ì ìˆ˜: <span id="score">0</span></div>
            <div class="info-item">ì†ë„: <span id="speed">0</span></div>
            <div class="info-item">íŠ¸ë¦­: <span id="tricks">0</span></div>
            <div class="info-item">ìµœê³  ê¸°ë¡: <span id="bestScore">0</span></div>
            
            <div id="secretMessage">
                ğŸ’– ë¹„ë°€ ì•”í˜¸ í™œì„±í™”!<br>ìŠˆí¼ ì„œí•‘ ëª¨ë“œ ON! ğŸ’–
            </div>
            
            <button onclick="resetGame()">ìƒˆ ê²Œì„</button>
            <button onclick="togglePause()">ì¼ì‹œì •ì§€</button>
        </div>
    </div>

    <script>
        // ìº”ë²„ìŠ¤ ì„¤ì •
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ê²Œì„ ìƒíƒœ
        let gameRunning = true;
        let gamePaused = false;
        let score = 0;
        let speed = 2;
        let tricks = 0;
        let bestScore = localStorage.getItem('surfingBestScore') || 0;
        
        // ë¹„ë°€ ì•”í˜¸ ê´€ë ¨ ë³€ìˆ˜
        let secretMode = false;
        let secretInput = '';
        const secretPassword = 'ì„œë¯¼ì¬ì‚¬ë‘í•´';
        
        // ì„œí¼ ì„¤ì •
        const surfer = {
            x: 100,
            y: 300,
            width: 30,
            height: 40,
            vy: 0,
            onWave: true,
            rotation: 0,
            trickTime: 0
        };
        
        // íŒŒë„ ì„¤ì •
        let waveOffset = 0;
        let waveHeight = 100;
        let waveFreq = 0.01;
        
        // ì¥ì• ë¬¼ê³¼ ì•„ì´í…œë“¤
        let obstacles = [];
        let items = [];
        let particles = [];
        
        // í‚¤ ì…ë ¥ ìƒíƒœ
        const keys = {};
        
        // ì¥ì• ë¬¼ í´ë˜ìŠ¤
        class Obstacle {
            constructor() {
                this.x = canvas.width + 50;
                this.y = Math.random() * 200 + 200;
                this.width = 40;
                this.height = 60;
                this.type = Math.random() < 0.5 ? 'rock' : 'shark';
                this.speed = speed;
            }
            
            update() {
                this.x -= this.speed;
                return this.x > -this.width;
            }
            
            draw() {
                if (this.type === 'rock') {
                    ctx.fillStyle = '#8b4513';
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                    
                    // ë°”ìœ„ ë””í…Œì¼
                    ctx.fillStyle = '#654321';
                    ctx.fillRect(this.x + 5, this.y + 5, 10, 10);
                    ctx.fillRect(this.x + 20, this.y + 15, 15, 15);
                } else {
                    // ìƒì–´
                    ctx.fillStyle = '#708090';
                    ctx.beginPath();
                    ctx.ellipse(this.x + 20, this.y + 30, 20, 15, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // ìƒì–´ ì§€ëŠëŸ¬ë¯¸
                    ctx.fillStyle = '#2f4f4f';
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y + 20);
                    ctx.lineTo(this.x + 15, this.y + 10);
                    ctx.lineTo(this.x + 15, this.y + 30);
                    ctx.fill();
                }
            }
            
            checkCollision(surfer) {
                return surfer.x < this.x + this.width &&
                       surfer.x + surfer.width > this.x &&
                       surfer.y < this.y + this.height &&
                       surfer.y + surfer.height > this.y;
            }
        }
        
        // ì•„ì´í…œ í´ë˜ìŠ¤
        class Item {
            constructor() {
                this.x = canvas.width + 50;
                this.y = Math.random() * 150 + 150;
                this.width = 25;
                this.height = 25;
                this.type = Math.random() < 0.7 ? 'coin' : 'boost';
                this.speed = speed;
                this.rotation = 0;
            }
            
            update() {
                this.x -= this.speed;
                this.rotation += 0.1;
                return this.x > -this.width;
            }
            
            draw() {
                ctx.save();
                ctx.translate(this.x + this.width/2, this.y + this.height/2);
                ctx.rotate(this.rotation);
                
                if (this.type === 'coin') {
                    ctx.fillStyle = secretMode ? '#ff6b6b' : '#ffd700';
                    ctx.beginPath();
                    ctx.arc(0, 0, 12, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#fff';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('$', 0, 5);
                } else {
                    // ë¶€ìŠ¤íŠ¸ ì•„ì´í…œ
                    ctx.fillStyle = secretMode ? '#ffd700' : '#ff6b6b';
                    ctx.beginPath();
                    ctx.moveTo(0, -12);
                    ctx.lineTo(8, 8);
                    ctx.lineTo(-8, 8);
                    ctx.closePath();
                    ctx.fill();
                }
                
                ctx.restore();
            }
            
            checkCollision(surfer) {
                return surfer.x < this.x + this.width &&
                       surfer.x + surfer.width > this.x &&
                       surfer.y < this.y + this.height &&
                       surfer.y + surfer.height > this.y;
            }
        }
        
        // íŒŒí‹°í´ íš¨ê³¼
        function createSplashParticles(x, y) {
            for (let i = 0; i < 8; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: Math.random() * -8 - 2,
                    life: 40,
                    color: secretMode ? '#ffd700' : '#87CEEB'
                });
            }
        }
        
        function createTrickParticles(x, y) {
            for (let i = 0; i < 12; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 12,
                    vy: (Math.random() - 0.5) * 12,
                    life: 30,
                    color: secretMode ? '#ff6b6b' : '#ffd700'
                });
            }
        }
        
        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.3;
                p.life--;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }
        
        // ì´ˆê¸°í™”
        document.getElementById('bestScore').textContent = bestScore;
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            
            // ë¹„ë°€ ì•”í˜¸ ì…ë ¥ ì²˜ë¦¬
            if (e.key.length === 1) {
                secretInput += e.key;
                if (secretInput.length > secretPassword.length) {
                    secretInput = secretInput.slice(-secretPassword.length);
                }
                
                if (secretInput === secretPassword) {
                    secretMode = !secretMode;
                    document.getElementById('secretMessage').style.display = secretMode ? 'block' : 'none';
                    secretInput = '';
                }
            }
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });
        
        function getWaveHeight(x) {
            return Math.sin((x + waveOffset) * waveFreq) * waveHeight + canvas.height - 200;
        }
        
        function updateSurfer() {
            // ì¢Œìš° ì´ë™
            if (keys['ArrowLeft'] && surfer.x > 0) {
                surfer.x -= 3;
            }
            if (keys['ArrowRight'] && surfer.x < canvas.width - surfer.width) {
                surfer.x += 3;
            }
            
            // ì í”„
            if (keys['Space'] && surfer.onWave) {
                surfer.vy = secretMode ? -15 : -12;
                surfer.onWave = false;
                surfer.trickTime = 30; // íŠ¸ë¦­ ì‹œê°„
                createSplashParticles(surfer.x + surfer.width/2, surfer.y + surfer.height);
            }
            
            // ì¤‘ë ¥ ì ìš©
            if (!surfer.onWave) {
                surfer.vy += 0.5;
                surfer.y += surfer.vy;
                
                // íŠ¸ë¦­ íšŒì „
                if (surfer.trickTime > 0) {
                    surfer.rotation += 0.3;
                    surfer.trickTime--;
                }
                
                // íŒŒë„ì™€ ì¶©ëŒ ê²€ì‚¬
                const waveY = getWaveHeight(surfer.x + surfer.width/2);
                if (surfer.y + surfer.height >= waveY) {
                    surfer.y = waveY - surfer.height;
                    surfer.vy = 0;
                    surfer.onWave = true;
                    
                    // íŠ¸ë¦­ ì™„ë£Œ
                    if (surfer.rotation > Math.PI) {
                        tricks++;
                        score += secretMode ? 100 : 50;
                        createTrickParticles(surfer.x + surfer.width/2, surfer.y);
                    }
                    surfer.rotation = 0;
                    surfer.trickTime = 0;
                }
            } else {
                // íŒŒë„ ìœ„ì—ì„œ ì›€ì§ì„
                const waveY = getWaveHeight(surfer.x + surfer.width/2);
                surfer.y = waveY - surfer.height;
            }
        }
        
        function spawnObstacles() {
            if (Math.random() < 0.01 + speed * 0.001) {
                obstacles.push(new Obstacle());
            }
        }
        
        function spawnItems() {
            if (Math.random() < 0.008) {
                items.push(new Item());
            }
        }
        
        function updateGame() {
            if (!gameRunning || gamePaused) return;
            
            // íŒŒë„ ì• ë‹ˆë©”ì´ì…˜
            waveOffset += speed;
            
            // ì„œí¼ ì—…ë°ì´íŠ¸
            updateSurfer();
            
            // ì¥ì• ë¬¼ ì—…ë°ì´íŠ¸
            for (let i = obstacles.length - 1; i >= 0; i--) {
                if (!obstacles[i].update()) {
                    obstacles.splice(i, 1);
                } else if (!secretMode && obstacles[i].checkCollision(surfer)) {
                    // ì¶©ëŒ - ê²Œì„ ì˜¤ë²„
                    gameOver();
                    return;
                }
            }
            
            // ì•„ì´í…œ ì—…ë°ì´íŠ¸
            for (let i = items.length - 1; i >= 0; i--) {
                if (!items[i].update()) {
                    items.splice(i, 1);
                } else if (items[i].checkCollision(surfer)) {
                    const item = items[i];
                    if (item.type === 'coin') {
                        score += secretMode ? 40 : 20;
                    } else {
                        speed += 0.5;
                        score += secretMode ? 60 : 30;
                    }
                    items.splice(i, 1);
                    createSplashParticles(item.x, item.y);
                }
            }
            
            // ê²Œì„ ì§„í–‰
            score += Math.floor(speed);
            speed += 0.001;
            
            spawnObstacles();
            spawnItems();
            updateParticles();
            
            // UI ì—…ë°ì´íŠ¸
            document.getElementById('score').textContent = Math.floor(score);
            document.getElementById('speed').textContent = speed.toFixed(1);
            document.getElementById('tricks').textContent = tricks;
        }
        
        function gameOver() {
            gameRunning = false;
            
            if (score > bestScore) {
                bestScore = Math.floor(score);
                localStorage.setItem('surfingBestScore', bestScore);
                document.getElementById('bestScore').textContent = bestScore;
            }
        }
        
        function resetGame() {
            gameRunning = true;
            gamePaused = false;
            score = 0;
            speed = 2;
            tricks = 0;
            waveOffset = 0;
            
            surfer.x = 100;
            surfer.y = 300;
            surfer.vy = 0;
            surfer.onWave = true;
            surfer.rotation = 0;
            surfer.trickTime = 0;
            
            obstacles = [];
            items = [];
            particles = [];
            
            updateDisplay();
        }
        
        function togglePause() {
            gamePaused = !gamePaused;
        }
        
        function updateDisplay() {
            document.getElementById('score').textContent = Math.floor(score);
            document.getElementById('speed').textContent = speed.toFixed(1);
            document.getElementById('tricks').textContent = tricks;
        }
        
        function draw() {
            // ë°°ê²½ ê·¸ë¦¬ê¸°
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, secretMode ? '#1a1a2e' : '#87CEEB');
            gradient.addColorStop(0.7, secretMode ? '#16213e' : '#4682B4');
            gradient.addColorStop(1, secretMode ? '#0f0f23' : '#191970');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // íƒœì–‘ ê·¸ë¦¬ê¸°
            ctx.fillStyle = secretMode ? '#ff6b6b' : '#FFD700';
            ctx.beginPath();
            ctx.arc(canvas.width - 100, 80, 40, 0, Math.PI * 2);
            ctx.fill();
            
            // êµ¬ë¦„ ê·¸ë¦¬ê¸°
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            for (let i = 0; i < 3; i++) {
                const x = (waveOffset * 0.1 + i * 200) % (canvas.width + 100) - 50;
                const y = 60 + i * 20;
                ctx.beginPath();
                ctx.arc(x, y, 25, 0, Math.PI * 2);
                ctx.arc(x + 20, y, 30, 0, Math.PI * 2);
                ctx.arc(x + 40, y, 25, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // íŒŒë„ ê·¸ë¦¬ê¸°
            ctx.fillStyle = secretMode ? '#4ecdc4' : '#00CED1';
            ctx.beginPath();
            ctx.moveTo(0, canvas.height);
            for (let x = 0; x <= canvas.width; x += 5) {
                const y = getWaveHeight(x);
                ctx.lineTo(x, y);
            }
            ctx.lineTo(canvas.width, canvas.height);
            ctx.closePath();
            ctx.fill();
            
            // íŒŒë„ ê±°í’ˆ
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            for (let x = 0; x <= canvas.width; x += 20) {
                const y = getWaveHeight(x) - 5;
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ì¥ì• ë¬¼ ê·¸ë¦¬ê¸°
            for (let obstacle of obstacles) {
                obstacle.draw();
            }
            
            // ì•„ì´í…œ ê·¸ë¦¬ê¸°
            for (let item of items) {
                item.draw();
            }
            
            // ì„œí¼ ê·¸ë¦¬ê¸°
            ctx.save();
            ctx.translate(surfer.x + surfer.width/2, surfer.y + surfer.height/2);
            ctx.rotate(surfer.rotation);
            
            // ì„œí¼ ëª¸
            ctx.fillStyle = secretMode ? '#ffd700' : '#ff6b6b';
            ctx.fillRect(-surfer.width/2, -surfer.height/2, surfer.width, surfer.height);
            
            // ì„œí¼ ë¨¸ë¦¬
            ctx.fillStyle = '#fdbcb4';
            ctx.beginPath();
            ctx.arc(0, -surfer.height/2 - 8, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // ì„œí•‘ë³´ë“œ
            ctx.fillStyle = secretMode ? '#ff6b6b' : '#FFD700';
            ctx.fillRect(-5, surfer.height/2 - 5, 10, 15);
            
            ctx.restore();
            
            // íŒŒí‹°í´ ê·¸ë¦¬ê¸°
            for (let p of particles) {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 40;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 4, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.globalAlpha = 1;
            
            // ê²Œì„ ì˜¤ë²„ í™”ë©´
            if (!gameRunning) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#fff';
                ctx.font = '48px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ê²Œì„ ì˜¤ë²„!', canvas.width/2, canvas.height/2 - 50);
                
                ctx.font = '24px Arial';
                ctx.fillText(`ìµœì¢… ì ìˆ˜: ${Math.floor(score)}`, canvas.width/2, canvas.height/2);
                ctx.fillText(`íŠ¸ë¦­ ìˆ˜: ${tricks}`, canvas.width/2, canvas.height/2 + 30);
            }
        }
        
        function gameLoop() {
            updateGame();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        // ê²Œì„ ì‹œì‘
        updateDisplay();
        gameLoop();
    </script>
</body>
</html>