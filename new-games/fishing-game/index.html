<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ£ ë‚šì‹œ ê²Œì„</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #87CEEB, #4682B4);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        
        .game-container {
            text-align: center;
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #4682B4;
        }
        
        canvas {
            border: 3px solid #2F4F4F;
            border-radius: 10px;
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 30%, #191970 100%);
        }
        
        .ui {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(70, 130, 180, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            font-weight: bold;
        }
        
        .controls {
            margin-top: 15px;
            font-size: 14px;
            color: #ccc;
        }
        
        .power-meter {
            width: 200px;
            height: 20px;
            background: #333;
            border: 2px solid #4682B4;
            border-radius: 10px;
            margin: 10px auto;
            position: relative;
            overflow: hidden;
        }
        
        .power-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000);
            width: 0%;
            transition: width 0.1s;
        }
        
        .fishing-status {
            margin: 10px 0;
            font-size: 18px;
            font-weight: bold;
            min-height: 25px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ£ ë‚šì‹œ ê²Œì„</h1>
        
        <div class="ui">
            <div class="stat">ğŸŸ ì¡ì€ ë¬¼ê³ ê¸°: <span id="fishCaught">0</span></div>
            <div class="stat">ğŸ’° ì ìˆ˜: <span id="score">0</span></div>
            <div class="stat">â° ì‹œê°„: <span id="timeLeft">60</span>ì´ˆ</div>
        </div>
        
        <div class="fishing-status" id="fishingStatus">ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë‚šì‹œë¥¼ ì‹œì‘í•˜ì„¸ìš”!</div>
        
        <div class="power-meter">
            <div class="power-fill" id="powerFill"></div>
        </div>
        
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        
        <div class="controls">
            <p>ğŸ® ì¡°ì‘ë²•: ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë‚šì‹œ ì‹œì‘, ë¬¼ê³ ê¸°ê°€ ë¬¼ë©´ ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ë‹¹ê¸°ê¸°!</p>
            <p>ğŸ’¡ íŒ: íŒŒì›Œ ê²Œì´ì§€ê°€ ì´ˆë¡ìƒ‰ì¼ ë•Œ ë†“ìœ¼ë©´ ë” ë©€ë¦¬ ë˜ì§ˆ ìˆ˜ ìˆì–´ìš”!</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            fishCaught: 0,
            score: 0,
            timeLeft: 60,
            gameRunning: true,
            fishingState: 'ready', // ready, casting, waiting, hooked, reeling
            power: 0,
            powerDirection: 1
        };
        
        // ë‚šì‹œê¾¼
        const fisherman = {
            x: 100,
            y: 200,
            size: 40
        };
        
        // ë‚šì‹œì¤„ê³¼ ë¯¸ë¼
        const fishingLine = {
            x: fisherman.x + 30,
            y: fisherman.y + 20,
            targetX: 400,
            targetY: 400,
            hookX: 400,
            hookY: 400,
            isInWater: false
        };
        
        // ë¬¼ê³ ê¸°ë“¤
        let fishes = [];
        let particles = [];
        
        // ë¬¼ê³ ê¸° ì¢…ë¥˜
        const fishTypes = [
            { name: 'ì‘ì€ ë¬¼ê³ ê¸°', size: 15, speed: 2, points: 10, color: '#FFD700', rarity: 0.6 },
            { name: 'ì¤‘ê°„ ë¬¼ê³ ê¸°', size: 25, speed: 1.5, points: 25, color: '#FF6347', rarity: 0.3 },
            { name: 'í° ë¬¼ê³ ê¸°', size: 35, speed: 1, points: 50, color: '#4169E1', rarity: 0.08 },
            { name: 'ì „ì„¤ì˜ ë¬¼ê³ ê¸°', size: 45, speed: 0.8, points: 100, color: '#FF1493', rarity: 0.02 }
        ];
        
        // í‚¤ ì…ë ¥
        const keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ') {
                e.preventDefault();
                handleSpaceBar();
            }
        });
        document.addEventListener('keyup', (e) => keys[e.key] = false);
        
        // ìŠ¤í˜ì´ìŠ¤ë°” ì²˜ë¦¬
        function handleSpaceBar() {
            switch(gameState.fishingState) {
                case 'ready':
                    startCasting();
                    break;
                case 'casting':
                    cast();
                    break;
                case 'hooked':
                    startReeling();
                    break;
                case 'reeling':
                    reel();
                    break;
            }
        }
        
        // ìºìŠ¤íŒ… ì‹œì‘
        function startCasting() {
            gameState.fishingState = 'casting';
            gameState.power = 0;
            gameState.powerDirection = 1;
            document.getElementById('fishingStatus').textContent = 'íŒŒì›Œë¥¼ ì¡°ì ˆí•˜ê³  ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ë˜ì§€ì„¸ìš”!';
        }
        
        // ìºìŠ¤íŒ…
        function cast() {
            const distance = 200 + (gameState.power / 100) * 400;
            const angle = -Math.PI / 4;
            
            fishingLine.targetX = fisherman.x + Math.cos(angle) * distance;
            fishingLine.targetY = fisherman.y + Math.sin(angle) * distance;
            
            // ë¬¼ ì˜ì—­ ì²´í¬
            if (fishingLine.targetY > 300) {
                fishingLine.isInWater = true;
                gameState.fishingState = 'waiting';
                document.getElementById('fishingStatus').textContent = 'ë¬¼ê³ ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...';
                
                // ë¬¼ê³ ê¸°ê°€ ë¬¼ í™•ë¥  ê³„ì‚°
                setTimeout(() => {
                    if (gameState.fishingState === 'waiting' && Math.random() < 0.7) {
                        hookFish();
                    } else if (gameState.fishingState === 'waiting') {
                        document.getElementById('fishingStatus').textContent = 'ë¬¼ê³ ê¸°ê°€ ì•ˆ ë¬¼ì—ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”!';
                        gameState.fishingState = 'ready';
                    }
                }, 2000 + Math.random() * 3000);
            } else {
                document.getElementById('fishingStatus').textContent = 'ë¬¼ì— ë‹¿ì§€ ì•Šì•˜ì–´ìš”. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”!';
                gameState.fishingState = 'ready';
            }
            
            gameState.power = 0;
        }
        
        // ë¬¼ê³ ê¸°ê°€ ë¯¸ë¼ë¥¼ ë¬¼ìŒ
        function hookFish() {
            // ëœë¤ ë¬¼ê³ ê¸° ì„ íƒ
            const rand = Math.random();
            let selectedFish = fishTypes[0];
            
            for (let fish of fishTypes) {
                if (rand < fish.rarity) {
                    selectedFish = fish;
                    break;
                }
            }
            
            gameState.hookedFish = selectedFish;
            gameState.fishingState = 'hooked';
            document.getElementById('fishingStatus').textContent = `${selectedFish.name}ì´(ê°€) ë¬¼ì—ˆì–´ìš”! ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ë‹¹ê¸°ì„¸ìš”!`;
            
            // ë¬¼ê³ ê¸° ìƒì„±
            fishes.push({
                x: fishingLine.targetX,
                y: fishingLine.targetY,
                ...selectedFish,
                vx: (Math.random() - 0.5) * 2,
                vy: (Math.random() - 0.5) * 2,
                struggle: 0
            });
        }
        
        // ë¦´ë§ ì‹œì‘
        function startReeling() {
            gameState.fishingState = 'reeling';
            gameState.reelingProgress = 0;
            document.getElementById('fishingStatus').textContent = 'ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ì—°íƒ€í•´ì„œ ë¬¼ê³ ê¸°ë¥¼ ëŒì–´ì˜¬ë¦¬ì„¸ìš”!';
        }
        
        // ë¦´ë§
        function reel() {
            if (gameState.fishingState === 'reeling') {
                gameState.reelingProgress += 10;
                
                if (gameState.reelingProgress >= 100) {
                    catchFish();
                }
            }
        }
        
        // ë¬¼ê³ ê¸° ì¡ê¸° ì„±ê³µ
        function catchFish() {
            const fish = gameState.hookedFish;
            gameState.fishCaught++;
            gameState.score += fish.points;
            gameState.fishingState = 'ready';
            
            document.getElementById('fishingStatus').textContent = `${fish.name}ì„(ë¥¼) ì¡ì•˜ì–´ìš”! +${fish.points}ì `;
            
            // íŒŒí‹°í´ íš¨ê³¼
            createParticles(fishingLine.targetX, fishingLine.targetY, fish.color);
            
            // ë¬¼ê³ ê¸° ì œê±°
            fishes = fishes.filter(f => f !== gameState.hookedFish);
            
            setTimeout(() => {
                if (gameState.fishingState === 'ready') {
                    document.getElementById('fishingStatus').textContent = 'ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë‚šì‹œë¥¼ ì‹œì‘í•˜ì„¸ìš”!';
                }
            }, 2000);
        }
        
        // íŒŒí‹°í´ ìƒì„±
        function createParticles(x, y, color) {
            for (let i = 0; i < 10; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 8,
                    vy: (Math.random() - 0.5) * 8,
                    life: 30,
                    maxLife: 30,
                    color: color,
                    size: Math.random() * 6 + 2
                });
            }
        }
        
        // ì—…ë°ì´íŠ¸
        function update() {
            if (!gameState.gameRunning) return;
            
            // íŒŒì›Œ ê²Œì´ì§€ ì—…ë°ì´íŠ¸
            if (gameState.fishingState === 'casting') {
                gameState.power += gameState.powerDirection * 2;
                if (gameState.power >= 100) {
                    gameState.power = 100;
                    gameState.powerDirection = -1;
                } else if (gameState.power <= 0) {
                    gameState.power = 0;
                    gameState.powerDirection = 1;
                }
            }
            
            // ë‚šì‹œì¤„ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            if (gameState.fishingState !== 'ready') {
                const dx = fishingLine.targetX - fishingLine.hookX;
                const dy = fishingLine.targetY - fishingLine.hookY;
                fishingLine.hookX += dx * 0.1;
                fishingLine.hookY += dy * 0.1;
            } else {
                fishingLine.hookX = fisherman.x + 30;
                fishingLine.hookY = fisherman.y + 20;
            }
            
            // ë¬¼ê³ ê¸° ì—…ë°ì´íŠ¸
            fishes.forEach((fish, index) => {
                fish.x += fish.vx;
                fish.y += fish.vy;
                
                // ê²½ê³„ ì²´í¬
                if (fish.x < 0 || fish.x > canvas.width) fish.vx *= -1;
                if (fish.y < 300 || fish.y > canvas.height) fish.vy *= -1;
                
                // íˆ¬ìŸ
                if (gameState.fishingState === 'reeling' && fish === gameState.hookedFish) {
                    fish.struggle += 0.5;
                    fish.vx = Math.sin(fish.struggle) * 3;
                    fish.vy = Math.cos(fish.struggle) * 2;
                }
            });
            
            // íŒŒí‹°í´ ì—…ë°ì´íŠ¸
            particles.forEach((particle, index) => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.vx *= 0.95;
                particle.vy *= 0.95;
                particle.life--;
                
                if (particle.life <= 0) {
                    particles.splice(index, 1);
                }
            });
            
            updateUI();
        }
        
        // ë Œë”ë§
        function render() {
            // ë°°ê²½ (í•˜ëŠ˜ê³¼ ë¬¼)
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, 300);
            
            ctx.fillStyle = '#4682B4';
            ctx.fillRect(0, 300, canvas.width, canvas.height - 300);
            
            // ë¬¼ê²° íš¨ê³¼
            ctx.strokeStyle = '#87CEEB';
            ctx.lineWidth = 2;
            for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                ctx.moveTo(0, 320 + i * 20);
                for (let x = 0; x < canvas.width; x += 20) {
                    ctx.lineTo(x, 320 + i * 20 + Math.sin((x + Date.now() * 0.002) * 0.02) * 5);
                }
                ctx.stroke();
            }
            
            // ë‚šì‹œê¾¼
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(fisherman.x, fisherman.y, fisherman.size, fisherman.size);
            
            // ë‚šì‹œê¾¼ ì–¼êµ´
            ctx.fillStyle = '#FDBCB4';
            ctx.fillRect(fisherman.x + 5, fisherman.y + 5, 20, 20);
            
            // ë‚šì‹œëŒ€
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(fisherman.x + 30, fisherman.y + 10);
            ctx.lineTo(fisherman.x + 60, fisherman.y - 20);
            ctx.stroke();
            
            // ë‚šì‹œì¤„
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(fisherman.x + 60, fisherman.y - 20);
            ctx.lineTo(fishingLine.hookX, fishingLine.hookY);
            ctx.stroke();
            
            // ë¯¸ë¼/ë°”ëŠ˜
            ctx.fillStyle = '#FF0000';
            ctx.beginPath();
            ctx.arc(fishingLine.hookX, fishingLine.hookY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            // ë¬¼ê³ ê¸°ë“¤
            fishes.forEach(fish => {
                ctx.fillStyle = fish.color;
                ctx.beginPath();
                ctx.ellipse(fish.x, fish.y, fish.size, fish.size * 0.7, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // ë¬¼ê³ ê¸° ëˆˆ
                ctx.fillStyle = '#000000';
                ctx.beginPath();
                ctx.arc(fish.x + fish.size * 0.3, fish.y - fish.size * 0.2, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // ë¬¼ê³ ê¸° ê¼¬ë¦¬
                ctx.fillStyle = fish.color;
                ctx.beginPath();
                ctx.moveTo(fish.x - fish.size, fish.y);
                ctx.lineTo(fish.x - fish.size * 1.5, fish.y - fish.size * 0.5);
                ctx.lineTo(fish.x - fish.size * 1.5, fish.y + fish.size * 0.5);
                ctx.closePath();
                ctx.fill();
            });
            
            // íŒŒí‹°í´
            particles.forEach(particle => {
                const alpha = particle.life / particle.maxLife;
                ctx.globalAlpha = alpha;
                ctx.fillStyle = particle.color;
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fill();
            });
            ctx.globalAlpha = 1;
            
            // ë¦´ë§ ì§„í–‰ë„
            if (gameState.fishingState === 'reeling') {
                const progress = gameState.reelingProgress || 0;
                ctx.fillStyle = 'rgba(0,0,0,0.7)';
                ctx.fillRect(canvas.width - 120, 20, 100, 20);
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(canvas.width - 120, 20, progress, 20);
                ctx.fillStyle = '#ffffff';
                ctx.font = '12px Arial';
                ctx.fillText('ë¦´ë§ ì§„í–‰ë„', canvas.width - 115, 15);
            }
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('fishCaught').textContent = gameState.fishCaught;
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('timeLeft').textContent = Math.max(0, gameState.timeLeft);
            
            // íŒŒì›Œ ê²Œì´ì§€
            document.getElementById('powerFill').style.width = gameState.power + '%';
        }
        
        // íƒ€ì´ë¨¸
        setInterval(() => {
            if (gameState.gameRunning && gameState.timeLeft > 0) {
                gameState.timeLeft--;
                if (gameState.timeLeft <= 0) {
                    gameState.gameRunning = false;
                    alert(`ê²Œì„ ì¢…ë£Œ! ì¡ì€ ë¬¼ê³ ê¸°: ${gameState.fishCaught}ë§ˆë¦¬, ìµœì¢… ì ìˆ˜: ${gameState.score}ì `);
                }
            }
        }, 1000);
        
        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }
        
        // ê²Œì„ ì‹œì‘
        gameLoop();
    </script>
</body>
</html>