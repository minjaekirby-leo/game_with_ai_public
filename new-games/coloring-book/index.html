<!DOCTYPE html>
<html>
<head>
    <title>ìƒ‰ì¹ í•˜ê¸° ê²Œì„</title>
    
    <!-- Google Analytics -->
    <script src="../../analytics.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            color: #333;
            text-align: center;
            min-height: 100vh;
        }
        
        h1 {
            font-size: 3rem;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            color: #e91e63;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin: 20px auto;
            max-width: 1000px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        canvas {
            border: 5px solid #e91e63;
            border-radius: 15px;
            background: white;
            cursor: crosshair;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 10px;
            margin: 20px 0;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .color-btn {
            width: 40px;
            height: 40px;
            border: 3px solid #333;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .color-btn:hover {
            transform: scale(1.1);
        }
        
        .color-btn.selected {
            border-width: 5px;
            transform: scale(1.2);
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background: linear-gradient(45deg, #e91e63, #ad1457);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: scale(1.05);
        }
        
        .templates {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .template-btn {
            background: white;
            border: 3px solid #e91e63;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .template-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.3);
        }
    </style>
</head>
<body>
    <h1>ğŸ¨ ìƒ‰ì¹ í•˜ê¸° ê²Œì„</h1>
    
    <div class="game-container">
        <div class="templates">
            <button class="template-btn" onclick="loadTemplate('cat')">ğŸ± ê³ ì–‘ì´</button>
            <button class="template-btn" onclick="loadTemplate('flower')">ğŸŒ¸ ê½ƒ</button>
            <button class="template-btn" onclick="loadTemplate('car')">ğŸš— ìë™ì°¨</button>
            <button class="template-btn" onclick="loadTemplate('house')">ğŸ  ì§‘</button>
        </div>
        
        <canvas id="coloringCanvas" width="600" height="500"></canvas>
        
        <div class="color-palette" id="colorPalette"></div>
        
        <div class="controls">
            <button onclick="clearCanvas()">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
            <button onclick="saveImage()">ğŸ’¾ ì €ì¥</button>
            <button onclick="changeBrushSize()">ğŸ–Œï¸ ë¸ŒëŸ¬ì‹œ í¬ê¸°</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('coloringCanvas');
        const ctx = canvas.getContext('2d');
        
        let isDrawing = false;
        let currentColor = '#ff0000';
        let brushSize = 10;
        
        const colors = [
            '#ff0000', '#00ff00', '#0000ff', '#ffff00',
            '#ff00ff', '#00ffff', '#ffa500', '#800080',
            '#ffc0cb', '#8b4513', '#000000', '#ffffff',
            '#808080', '#90ee90', '#ffb6c1', '#dda0dd'
        ];
        
        // ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ìƒì„±
        function createColorPalette() {
            const palette = document.getElementById('colorPalette');
            palette.innerHTML = '';
            
            colors.forEach(color => {
                const colorBtn = document.createElement('div');
                colorBtn.className = 'color-btn';
                colorBtn.style.backgroundColor = color;
                colorBtn.onclick = () => selectColor(color, colorBtn);
                palette.appendChild(colorBtn);
            });
            
            // ì²« ë²ˆì§¸ ìƒ‰ìƒ ì„ íƒ
            palette.firstChild.classList.add('selected');
        }
        
        function selectColor(color, element) {
            currentColor = color;
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            element.classList.add('selected');
        }
        
        // í…œí”Œë¦¿ ë¡œë“œ
        function loadTemplate(type) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            
            switch(type) {
                case 'cat':
                    drawCatTemplate();
                    break;
                case 'flower':
                    drawFlowerTemplate();
                    break;
                case 'car':
                    drawCarTemplate();
                    break;
                case 'house':
                    drawHouseTemplate();
                    break;
            }
        }
        
        function drawCatTemplate() {
            // ê³ ì–‘ì´ ë¨¸ë¦¬
            ctx.beginPath();
            ctx.arc(300, 200, 80, 0, Math.PI * 2);
            ctx.stroke();
            
            // ê·€
            ctx.beginPath();
            ctx.moveTo(250, 150);
            ctx.lineTo(270, 100);
            ctx.lineTo(290, 150);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(310, 150);
            ctx.lineTo(330, 100);
            ctx.lineTo(350, 150);
            ctx.stroke();
            
            // ëˆˆ
            ctx.beginPath();
            ctx.arc(280, 180, 10, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(320, 180, 10, 0, Math.PI * 2);
            ctx.stroke();
            
            // ì½”
            ctx.beginPath();
            ctx.moveTo(300, 200);
            ctx.lineTo(290, 210);
            ctx.lineTo(310, 210);
            ctx.closePath();
            ctx.stroke();
            
            // ì…
            ctx.beginPath();
            ctx.arc(300, 220, 15, 0, Math.PI);
            ctx.stroke();
            
            // ëª¸
            ctx.beginPath();
            ctx.ellipse(300, 320, 60, 80, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // ê¼¬ë¦¬
            ctx.beginPath();
            ctx.arc(380, 300, 40, Math.PI, Math.PI * 1.5);
            ctx.stroke();
        }
        
        function drawFlowerTemplate() {
            // ê½ƒìë“¤
            for (let i = 0; i < 6; i++) {
                const angle = (i * Math.PI * 2) / 6;
                const x = 300 + Math.cos(angle) * 40;
                const y = 200 + Math.sin(angle) * 40;
                
                ctx.beginPath();
                ctx.ellipse(x, y, 25, 15, angle, 0, Math.PI * 2);
                ctx.stroke();
            }
            
            // ê½ƒ ì¤‘ì‹¬
            ctx.beginPath();
            ctx.arc(300, 200, 20, 0, Math.PI * 2);
            ctx.stroke();
            
            // ì¤„ê¸°
            ctx.beginPath();
            ctx.moveTo(300, 220);
            ctx.lineTo(300, 400);
            ctx.stroke();
            
            // ìì‚¬ê·€
            ctx.beginPath();
            ctx.ellipse(280, 300, 20, 10, -Math.PI/4, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.ellipse(320, 350, 20, 10, Math.PI/4, 0, Math.PI * 2);
            ctx.stroke();
        }
        
        function drawCarTemplate() {
            // ì°¨ì²´
            ctx.beginPath();
            ctx.roundRect(150, 250, 300, 100, 20);
            ctx.stroke();
            
            // ì§€ë¶•
            ctx.beginPath();
            ctx.roundRect(200, 200, 200, 60, 15);
            ctx.stroke();
            
            // ë°”í€´
            ctx.beginPath();
            ctx.arc(200, 370, 30, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(400, 370, 30, 0, Math.PI * 2);
            ctx.stroke();
            
            // ì°½ë¬¸
            ctx.beginPath();
            ctx.roundRect(220, 220, 70, 30, 5);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.roundRect(310, 220, 70, 30, 5);
            ctx.stroke();
            
            // í—¤ë“œë¼ì´íŠ¸
            ctx.beginPath();
            ctx.arc(460, 280, 15, 0, Math.PI * 2);
            ctx.stroke();
        }
        
        function drawHouseTemplate() {
            // ì§‘ ë²½
            ctx.beginPath();
            ctx.rect(200, 250, 200, 150);
            ctx.stroke();
            
            // ì§€ë¶•
            ctx.beginPath();
            ctx.moveTo(180, 250);
            ctx.lineTo(300, 150);
            ctx.lineTo(420, 250);
            ctx.closePath();
            ctx.stroke();
            
            // ë¬¸
            ctx.beginPath();
            ctx.rect(270, 320, 60, 80);
            ctx.stroke();
            
            // ë¬¸ ì†ì¡ì´
            ctx.beginPath();
            ctx.arc(320, 360, 3, 0, Math.PI * 2);
            ctx.stroke();
            
            // ì°½ë¬¸
            ctx.beginPath();
            ctx.rect(220, 280, 40, 40);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.rect(340, 280, 40, 40);
            ctx.stroke();
            
            // ì°½ë¬¸ ì‹­ì
            ctx.beginPath();
            ctx.moveTo(240, 280);
            ctx.lineTo(240, 320);
            ctx.moveTo(220, 300);
            ctx.lineTo(260, 300);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(360, 280);
            ctx.lineTo(360, 320);
            ctx.moveTo(340, 300);
            ctx.lineTo(380, 300);
            ctx.stroke();
            
            // êµ´ëš
            ctx.beginPath();
            ctx.rect(350, 120, 30, 60);
            ctx.stroke();
        }
        
        // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        
        function startDrawing(e) {
            isDrawing = true;
            draw(e);
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = currentColor;
            ctx.beginPath();
            ctx.arc(x, y, brushSize / 2, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        function saveImage() {
            const link = document.createElement('a');
            link.download = 'my-coloring.png';
            link.href = canvas.toDataURL();
            link.click();
        }
        
        function changeBrushSize() {
            const sizes = [5, 10, 15, 20];
            const currentIndex = sizes.indexOf(brushSize);
            brushSize = sizes[(currentIndex + 1) % sizes.length];
            alert(`ë¸ŒëŸ¬ì‹œ í¬ê¸°: ${brushSize}px`);
        }
        
        // ì´ˆê¸°í™”
        createColorPalette();
        loadTemplate('cat');
    </script>
</body>
</html>