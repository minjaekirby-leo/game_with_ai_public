<!DOCTYPE html>
<html>
<head>
    <title>ìŠ¤ë„ì¿ </title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            min-height: 100vh;
        }
        
        h1 {
            font-size: 3rem;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 20px auto;
            max-width: 800px;
            backdrop-filter: blur(10px);
        }
        
        .sudoku-board {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(9, 1fr);
            gap: 2px;
            width: 450px;
            height: 450px;
            margin: 20px auto;
            border: 4px solid #fff;
            border-radius: 10px;
            background: #fff;
            padding: 5px;
        }
        
        .sudoku-cell {
            width: 45px;
            height: 45px;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            color: #333;
        }
        
        .sudoku-cell:hover {
            background: #e3f2fd;
        }
        
        .sudoku-cell.selected {
            background: #2196f3;
            color: white;
        }
        
        .sudoku-cell.given {
            background: #f5f5f5;
            color: #000;
            font-weight: bold;
            cursor: default;
        }
        
        .sudoku-cell.error {
            background: #ffcdd2;
            color: #d32f2f;
        }
        
        .sudoku-cell.highlight {
            background: #fff3e0;
        }
        
        /* 3x3 ë°•ìŠ¤ êµ¬ë¶„ì„  */
        .sudoku-cell:nth-child(3n) {
            border-right: 3px solid #333;
        }
        
        .sudoku-cell:nth-child(n+19):nth-child(-n+27),
        .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 3px solid #333;
        }
        
        .number-pad {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }
        
        .number-btn {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .number-btn:hover {
            transform: scale(1.05);
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: scale(1.05);
        }
        
        .info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }
        
        .info-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .difficulty-selector {
            margin: 20px 0;
        }
        
        .difficulty-selector button {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            margin: 0 5px;
        }
        
        .difficulty-selector button.active {
            background: linear-gradient(45deg, #FFD700, #FFA500);
        }
    </style>
</head>
<body>
    <h1>ğŸ”¢ ìŠ¤ë„ì¿ </h1>
    
    <div class="game-container">
        <div class="info">
            <div class="info-box">ì‹œê°„: <span id="time">00:00</span></div>
            <div class="info-box">ì‹¤ìˆ˜: <span id="mistakes">0</span>/3</div>
            <div class="info-box">ì™„ì„±ë„: <span id="progress">0</span>%</div>
        </div>
        
        <div class="difficulty-selector">
            <button onclick="setDifficulty('easy')" id="easyBtn">ì‰¬ì›€</button>
            <button onclick="setDifficulty('medium')" id="mediumBtn" class="active">ë³´í†µ</button>
            <button onclick="setDifficulty('hard')" id="hardBtn">ì–´ë ¤ì›€</button>
        </div>
        
        <div class="sudoku-board" id="sudokuBoard"></div>
        
        <div class="number-pad">
            <button class="number-btn" onclick="selectNumber(1)">1</button>
            <button class="number-btn" onclick="selectNumber(2)">2</button>
            <button class="number-btn" onclick="selectNumber(3)">3</button>
            <button class="number-btn" onclick="selectNumber(4)">4</button>
            <button class="number-btn" onclick="selectNumber(5)">5</button>
            <button class="number-btn" onclick="selectNumber(6)">6</button>
            <button class="number-btn" onclick="selectNumber(7)">7</button>
            <button class="number-btn" onclick="selectNumber(8)">8</button>
            <button class="number-btn" onclick="selectNumber(9)">9</button>
            <button class="number-btn" onclick="clearCell()">ì§€ìš°ê¸°</button>
        </div>
        
        <div class="controls">
            <button onclick="newGame()">ğŸ® ìƒˆ ê²Œì„</button>
            <button onclick="checkSolution()">âœ… ê²€ì‚¬</button>
            <button onclick="getHint()">ğŸ’¡ íŒíŠ¸</button>
            <button onclick="solvePuzzle()">ğŸ¤– í•´ë‹µ</button>
        </div>
    </div>

    <script>
        let gameBoard = [];
        let solutionBoard = [];
        let selectedCell = null;
        let gameRunning = false;
        let startTime = 0;
        let gameTimer = null;
        let mistakes = 0;
        let difficulty = 'medium';

        // ìŠ¤ë„ì¿  í¼ì¦ ìƒì„±
        function generateSudoku(difficulty) {
            // ì™„ì„±ëœ ìŠ¤ë„ì¿  ìƒì„±
            solutionBoard = generateCompleteSudoku();
            gameBoard = JSON.parse(JSON.stringify(solutionBoard));
            
            // ë‚œì´ë„ì— ë”°ë¼ ì…€ ì œê±°
            const cellsToRemove = {
                'easy': 40,
                'medium': 50,
                'hard': 60
            };
            
            removeCells(cellsToRemove[difficulty]);
        }

        function generateCompleteSudoku() {
            const board = Array(9).fill().map(() => Array(9).fill(0));
            
            // ê°„ë‹¨í•œ ìŠ¤ë„ì¿  ìƒì„± (ì‹¤ì œë¡œëŠ” ë” ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ í•„ìš”)
            const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            
            // ì²« ë²ˆì§¸ í–‰ ì±„ìš°ê¸°
            for (let i = 0; i < 9; i++) {
                board[0][i] = numbers[i];
            }
            
            // ë‚˜ë¨¸ì§€ í–‰ë“¤ì„ ê·œì¹™ì— ë§ê²Œ ì±„ìš°ê¸°
            for (let row = 1; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    let shift = (row % 3) * 3 + Math.floor(row / 3);
                    board[row][col] = numbers[(col + shift) % 9];
                }
            }
            
            // ë³´ë“œ ì„ê¸° (í–‰ê³¼ ì—´ êµí™˜)
            shuffleBoard(board);
            
            return board;
        }

        function shuffleBoard(board) {
            // ê°™ì€ 3x3 ë¸”ë¡ ë‚´ì—ì„œ í–‰ êµí™˜
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 10; j++) {
                    const row1 = i * 3 + Math.floor(Math.random() * 3);
                    const row2 = i * 3 + Math.floor(Math.random() * 3);
                    [board[row1], board[row2]] = [board[row2], board[row1]];
                }
            }
            
            // ê°™ì€ 3x3 ë¸”ë¡ ë‚´ì—ì„œ ì—´ êµí™˜
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 10; j++) {
                    const col1 = i * 3 + Math.floor(Math.random() * 3);
                    const col2 = i * 3 + Math.floor(Math.random() * 3);
                    
                    for (let row = 0; row < 9; row++) {
                        [board[row][col1], board[row][col2]] = [board[row][col2], board[row][col1]];
                    }
                }
            }
        }

        function removeCells(count) {
            const positions = [];
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    positions.push([row, col]);
                }
            }
            
            // ìœ„ì¹˜ ì„ê¸°
            for (let i = positions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [positions[i], positions[j]] = [positions[j], positions[i]];
            }
            
            // ì…€ ì œê±°
            for (let i = 0; i < count && i < positions.length; i++) {
                const [row, col] = positions[i];
                gameBoard[row][col] = 0;
            }
        }

        function renderBoard() {
            const boardElement = document.getElementById('sudokuBoard');
            boardElement.innerHTML = '';
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'sudoku-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    const value = gameBoard[row][col];
                    if (value !== 0) {
                        cell.textContent = value;
                        if (isGivenCell(row, col)) {
                            cell.classList.add('given');
                        }
                    }
                    
                    cell.addEventListener('click', () => selectCell(row, col));
                    boardElement.appendChild(cell);
                }
            }
        }

        function isGivenCell(row, col) {
            // ì´ˆê¸°ì— ì£¼ì–´ì§„ ì…€ì¸ì§€ í™•ì¸ (0ì´ ì•„ë‹Œ ê°’ìœ¼ë¡œ ì‹œì‘í•œ ì…€)
            return gameBoard[row][col] !== 0 && solutionBoard[row][col] === gameBoard[row][col];
        }

        function selectCell(row, col) {
            if (!gameRunning) return;
            
            // ì£¼ì–´ì§„ ì…€ì€ ì„ íƒí•  ìˆ˜ ì—†ìŒ
            if (isGivenCell(row, col)) return;
            
            // ì´ì „ ì„ íƒ í•´ì œ
            document.querySelectorAll('.sudoku-cell').forEach(cell => {
                cell.classList.remove('selected', 'highlight');
            });
            
            // ìƒˆë¡œìš´ ì…€ ì„ íƒ
            selectedCell = { row, col };
            const cellElement = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            cellElement.classList.add('selected');
            
            // ê°™ì€ ìˆ«ì í•˜ì´ë¼ì´íŠ¸
            const value = gameBoard[row][col];
            if (value !== 0) {
                highlightSameNumbers(value);
            }
        }

        function highlightSameNumbers(number) {
            document.querySelectorAll('.sudoku-cell').forEach(cell => {
                if (cell.textContent == number) {
                    cell.classList.add('highlight');
                }
            });
        }

        function selectNumber(number) {
            if (!selectedCell || !gameRunning) return;
            
            const { row, col } = selectedCell;
            
            // ì£¼ì–´ì§„ ì…€ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŒ
            if (isGivenCell(row, col)) return;
            
            // ìˆ«ì ì…ë ¥
            gameBoard[row][col] = number;
            
            // ìœ íš¨ì„± ê²€ì‚¬
            if (!isValidMove(row, col, number)) {
                mistakes++;
                if (mistakes >= 3) {
                    gameOver();
                    return;
                }
                
                // ì˜¤ë¥˜ í‘œì‹œ
                const cellElement = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                cellElement.classList.add('error');
                setTimeout(() => {
                    cellElement.classList.remove('error');
                }, 1000);
            }
            
            renderBoard();
            updateProgress();
            checkCompletion();
        }

        function clearCell() {
            if (!selectedCell || !gameRunning) return;
            
            const { row, col } = selectedCell;
            
            // ì£¼ì–´ì§„ ì…€ì€ ì§€ìš¸ ìˆ˜ ì—†ìŒ
            if (isGivenCell(row, col)) return;
            
            gameBoard[row][col] = 0;
            renderBoard();
            updateProgress();
        }

        function isValidMove(row, col, number) {
            // í–‰ ê²€ì‚¬
            for (let c = 0; c < 9; c++) {
                if (c !== col && gameBoard[row][c] === number) {
                    return false;
                }
            }
            
            // ì—´ ê²€ì‚¬
            for (let r = 0; r < 9; r++) {
                if (r !== row && gameBoard[r][col] === number) {
                    return false;
                }
            }
            
            // 3x3 ë°•ìŠ¤ ê²€ì‚¬
            const boxRow = Math.floor(row / 3) * 3;
            const boxCol = Math.floor(col / 3) * 3;
            
            for (let r = boxRow; r < boxRow + 3; r++) {
                for (let c = boxCol; c < boxCol + 3; c++) {
                    if ((r !== row || c !== col) && gameBoard[r][c] === number) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        function updateProgress() {
            let filledCells = 0;
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (gameBoard[row][col] !== 0) {
                        filledCells++;
                    }
                }
            }
            
            const progress = Math.floor((filledCells / 81) * 100);
            document.getElementById('progress').textContent = progress;
        }

        function checkCompletion() {
            // ëª¨ë“  ì…€ì´ ì±„ì›Œì¡ŒëŠ”ì§€ í™•ì¸
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (gameBoard[row][col] === 0) {
                        return false;
                    }
                }
            }
            
            // í•´ë‹µê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (gameBoard[row][col] !== solutionBoard[row][col]) {
                        return false;
                    }
                }
            }
            
            // ê²Œì„ ì™„ë£Œ
            gameRunning = false;
            clearInterval(gameTimer);
            setTimeout(() => {
                alert(`ğŸ‰ ìŠ¤ë„ì¿  ì™„ì„±! ì‹œê°„: ${document.getElementById('time').textContent}`);
            }, 500);
            
            return true;
        }

        function checkSolution() {
            if (!gameRunning) return;
            
            let errors = 0;
            
            // ëª¨ë“  ì…€ ê²€ì‚¬
            document.querySelectorAll('.sudoku-cell').forEach(cell => {
                cell.classList.remove('error');
            });
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const value = gameBoard[row][col];
                    if (value !== 0 && !isValidMove(row, col, value)) {
                        const cellElement = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                        cellElement.classList.add('error');
                        errors++;
                    }
                }
            }
            
            if (errors === 0) {
                alert('âœ… í˜„ì¬ê¹Œì§€ ì˜¬ë°”ë¥´ê²Œ í’€ê³  ìˆìŠµë‹ˆë‹¤!');
            } else {
                alert(`âŒ ${errors}ê°œì˜ ì˜¤ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤.`);
            }
        }

        function getHint() {
            if (!gameRunning) return;
            
            // ë¹ˆ ì…€ ì¤‘ í•˜ë‚˜ë¥¼ ëœë¤í•˜ê²Œ ì„ íƒí•´ì„œ ì •ë‹µ í‘œì‹œ
            const emptyCells = [];
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (gameBoard[row][col] === 0) {
                        emptyCells.push({ row, col });
                    }
                }
            }
            
            if (emptyCells.length > 0) {
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                gameBoard[randomCell.row][randomCell.col] = solutionBoard[randomCell.row][randomCell.col];
                renderBoard();
                updateProgress();
                checkCompletion();
            }
        }

        function solvePuzzle() {
            if (!gameRunning) return;
            
            gameBoard = JSON.parse(JSON.stringify(solutionBoard));
            renderBoard();
            updateProgress();
            checkCompletion();
        }

        function setDifficulty(level) {
            difficulty = level;
            
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.difficulty-selector button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(level + 'Btn').classList.add('active');
            
            if (gameRunning) {
                newGame();
            }
        }

        function updateTimer() {
            if (!gameRunning) return;
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateDisplay() {
            document.getElementById('mistakes').textContent = mistakes;
            updateProgress();
        }

        function newGame() {
            gameRunning = true;
            startTime = Date.now();
            mistakes = 0;
            selectedCell = null;
            
            generateSudoku(difficulty);
            renderBoard();
            
            // íƒ€ì´ë¨¸ ì‹œì‘
            clearInterval(gameTimer);
            gameTimer = setInterval(updateTimer, 1000);
            
            updateDisplay();
            document.getElementById('time').textContent = '00:00';
        }

        function gameOver() {
            gameRunning = false;
            clearInterval(gameTimer);
            alert('ğŸ’¥ ê²Œì„ ì˜¤ë²„! ì‹¤ìˆ˜ë¥¼ ë„ˆë¬´ ë§ì´ í–ˆìŠµë‹ˆë‹¤.');
        }

        // í‚¤ë³´ë“œ ì…ë ¥ ì§€ì›
        document.addEventListener('keydown', (e) => {
            if (!gameRunning || !selectedCell) return;
            
            const key = e.key;
            if (key >= '1' && key <= '9') {
                selectNumber(parseInt(key));
            } else if (key === 'Delete' || key === 'Backspace') {
                clearCell();
            }
        });

        // ì´ˆê¸°í™”
        newGame();
    </script>
</body>
</html>