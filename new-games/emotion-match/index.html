<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ­ í‘œì • ë§ì¶”ê¸°</title>
    
    <!-- Google Analytics -->
    <script src="../../analytics.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #FF9A9E, #FECFEF);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        
        .game-container {
            text-align: center;
            background: rgba(0,0,0,0.8);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #FF69B4;
            max-width: 700px;
        }
        
        .ui {
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(255, 105, 180, 0.8);
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .emotion-display {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .emoji {
            font-size: 120px;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .question {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #FFD700;
        }
        
        .answer-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .answer-btn {
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .answer-btn:active {
            transform: scale(0.95);
        }
        
        .answer-btn.correct {
            background: linear-gradient(45deg, #27AE60, #2ECC71);
            animation: correctPulse 0.6s;
        }
        
        .answer-btn.wrong {
            background: linear-gradient(45deg, #E74C3C, #C0392B);
            animation: wrongShake 0.6s;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .feedback {
            font-size: 24px;
            font-weight: bold;
            margin: 15px 0;
            min-height: 30px;
        }
        
        .feedback.correct {
            color: #00FF7F;
        }
        
        .feedback.wrong {
            color: #FF6B6B;
        }
        
        .streak-indicator {
            font-size: 20px;
            margin: 10px 0;
            color: #FFD700;
        }
        
        .difficulty-selector {
            margin: 20px 0;
        }
        
        .difficulty-btn {
            background: #9370DB;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .difficulty-btn.active {
            background: #8A2BE2;
            box-shadow: 0 0 15px rgba(147, 112, 219, 0.5);
        }
        
        .controls {
            margin-top: 20px;
            font-size: 14px;
            color: #ccc;
            line-height: 1.5;
        }
        
        .emotion-hint {
            font-size: 16px;
            color: #87CEEB;
            margin: 10px 0;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ­ í‘œì • ë§ì¶”ê¸° ê²Œì„</h1>
        
        <div class="ui">
            <div class="stat">âœ… ì •ë‹µ: <span id="correct">0</span></div>
            <div class="stat">âŒ ì˜¤ë‹µ: <span id="wrong">0</span></div>
            <div class="stat">â­ ì ìˆ˜: <span id="score">0</span></div>
            <div class="stat">â° ì‹œê°„: <span id="timeLeft">60</span>ì´ˆ</div>
        </div>
        
        <div class="streak-indicator">
            ğŸ”¥ ì—°ì† ì •ë‹µ: <span id="streak">0</span>ê°œ
        </div>
        
        <div class="difficulty-selector">
            <button class="difficulty-btn active" onclick="setDifficulty('easy')">ì‰¬ì›€</button>
            <button class="difficulty-btn" onclick="setDifficulty('medium')">ë³´í†µ</button>
            <button class="difficulty-btn" onclick="setDifficulty('hard')">ì–´ë ¤ì›€</button>
        </div>
        
        <div class="emotion-display">
            <div class="question">ì´ í‘œì •ì€ ì–´ë–¤ ê°ì •ì¼ê¹Œìš”?</div>
            <div class="emoji" id="emoji">ğŸ˜Š</div>
            <div class="emotion-hint" id="emotionHint"></div>
        </div>
        
        <div class="answer-buttons" id="answerButtons">
            <!-- ë‹µ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="controls">
            <p>ğŸ® ì¡°ì‘ë²•: ì´ëª¨ì§€ í‘œì •ì„ ë³´ê³  ì˜¬ë°”ë¥¸ ê°ì •ì„ ì„ íƒí•˜ì„¸ìš”!</p>
            <p>ğŸ§  ê°ì • ì¸ì‹: í‘œì •ì˜ íŠ¹ì§•ì„ ì˜ ê´€ì°°í•´ë³´ì„¸ìš”!</p>
            <p>ğŸ’¡ íŒ: ì—°ì†ìœ¼ë¡œ ë§ì¶”ë©´ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ìš”!</p>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            correct: 0,
            wrong: 0,
            score: 0,
            streak: 0,
            timeLeft: 60,
            difficulty: 'easy',
            gameRunning: true,
            currentEmotion: null
        };
        
        // ê°ì • ë°ì´í„°
        const emotions = {
            easy: [
                { emoji: 'ğŸ˜Š', name: 'ê¸°ì¨', hint: 'ì…ê¼¬ë¦¬ê°€ ì˜¬ë¼ê°€ê³  ëˆˆì´ ì›ƒê³  ìˆì–´ìš”' },
                { emoji: 'ğŸ˜¢', name: 'ìŠ¬í””', hint: 'ëˆˆë¬¼ì´ íë¥´ê³  ì…ê¼¬ë¦¬ê°€ ë‚´ë ¤ê°€ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜ ', name: 'í™”ë‚¨', hint: 'ëˆˆì¹ì´ ì°Œí‘¸ë ¤ì§€ê³  ì…ì´ ì¼ê·¸ëŸ¬ì ¸ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜±', name: 'ë†€ëŒ', hint: 'ëˆˆê³¼ ì…ì´ í¬ê²Œ ë²Œì–´ì ¸ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜´', name: 'ì¡¸ë¦¼', hint: 'ëˆˆì´ ê°ê²¨ìˆê³  í‰í™”ë¡œì›Œ ë³´ì—¬ìš”' },
                { emoji: 'ğŸ¤”', name: 'ìƒê°', hint: 'ì†ì„ í„±ì— ëŒ€ê³  ìƒê°í•˜ëŠ” ëª¨ìŠµì´ì—ìš”' }
            ],
            medium: [
                { emoji: 'ğŸ˜Š', name: 'ê¸°ì¨', hint: 'ì…ê¼¬ë¦¬ê°€ ì˜¬ë¼ê°€ê³  ëˆˆì´ ì›ƒê³  ìˆì–´ìš”' },
                { emoji: 'ğŸ˜¢', name: 'ìŠ¬í””', hint: 'ëˆˆë¬¼ì´ íë¥´ê³  ì…ê¼¬ë¦¬ê°€ ë‚´ë ¤ê°€ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜ ', name: 'í™”ë‚¨', hint: 'ëˆˆì¹ì´ ì°Œí‘¸ë ¤ì§€ê³  ì…ì´ ì¼ê·¸ëŸ¬ì ¸ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜±', name: 'ë†€ëŒ', hint: 'ëˆˆê³¼ ì…ì´ í¬ê²Œ ë²Œì–´ì ¸ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜°', name: 'ê±±ì •', hint: 'ì‹ì€ë•€ì„ í˜ë¦¬ë©° ë¶ˆì•ˆí•´ ë³´ì—¬ìš”' },
                { emoji: 'ğŸ¥°', name: 'ì‚¬ë‘', hint: 'í•˜íŠ¸ ëˆˆìœ¼ë¡œ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œ ë³´ì—¬ìš”' },
                { emoji: 'ğŸ˜', name: 'ë©‹ì§', hint: 'ì„ ê¸€ë¼ìŠ¤ë¥¼ ì“°ê³  ì¿¨í•´ ë³´ì—¬ìš”' },
                { emoji: 'ğŸ¤—', name: 'í¬ì˜¹', hint: 'ë‘ íŒ”ì„ ë²Œë¦¬ê³  ì•ˆì•„ì£¼ë ¤ê³  í•´ìš”' }
            ],
            hard: [
                { emoji: 'ğŸ˜Š', name: 'ê¸°ì¨', hint: 'ì…ê¼¬ë¦¬ê°€ ì˜¬ë¼ê°€ê³  ëˆˆì´ ì›ƒê³  ìˆì–´ìš”' },
                { emoji: 'ğŸ˜¢', name: 'ìŠ¬í””', hint: 'ëˆˆë¬¼ì´ íë¥´ê³  ì…ê¼´ì´ ë‚´ë ¤ê°€ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜ ', name: 'í™”ë‚¨', hint: 'ëˆˆì¹ì´ ì°Œí‘¸ë ¤ì§€ê³  ì…ì´ ì¼ê·¸ëŸ¬ì ¸ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜±', name: 'ë†€ëŒ', hint: 'ëˆˆê³¼ ì…ì´ í¬ê²Œ ë²Œì–´ì ¸ ìˆì–´ìš”' },
                { emoji: 'ğŸ˜°', name: 'ê±±ì •', hint: 'ì‹ì€ë•€ì„ í˜ë¦¬ë©° ë¶ˆì•ˆí•´ ë³´ì—¬ìš”' },
                { emoji: 'ğŸ¥°', name: 'ì‚¬ë‘', hint: 'í•˜íŠ¸ ëˆˆìœ¼ë¡œ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œ ë³´ì—¬ìš”' },
                { emoji: 'ğŸ˜', name: 'ëŠ¥ê¸€', hint: 'í•œìª½ ì…ê¼¬ë¦¬ë§Œ ì˜¬ë¼ê°€ ìˆì–´ìš”' },
                { emoji: 'ğŸ™„', name: 'ì§œì¦', hint: 'ëˆˆì„ êµ´ë¦¬ë©° ì§€ê²¨ì›Œí•´ìš”' },
                { emoji: 'ğŸ˜¤', name: 'ë¶„ë…¸', hint: 'ì½”ì—ì„œ ê¹€ì´ ë‚˜ì˜¬ ì •ë„ë¡œ í™”ë‚˜ìš”' },
                { emoji: 'ğŸ¤', name: 'ë¹„ë°€', hint: 'ì…ì— ì§€í¼ê°€ ìˆì–´ ë§í•  ìˆ˜ ì—†ì–´ìš”' },
                { emoji: 'ğŸ˜µ', name: 'ì–´ì§€ëŸ¬ì›€', hint: 'ëˆˆì´ ëŒëŒ ëŒë©° ì–´ì§€ëŸ¬ì›Œí•´ìš”' },
                { emoji: 'ğŸ¤¤', name: 'ì¹¨í˜ë¦¼', hint: 'ë§›ìˆëŠ” ê±¸ ë³´ê³  ì¹¨ì„ í˜ë ¤ìš”' }
            ]
        };
        
        // ë‚œì´ë„ë³„ ì„¤ì •
        const difficultySettings = {
            easy: { timeLimit: 60, pointsPerCorrect: 10, hintEnabled: true },
            medium: { timeLimit: 45, pointsPerCorrect: 15, hintEnabled: true },
            hard: { timeLimit: 30, pointsPerCorrect: 25, hintEnabled: false }
        };
        
        // ë‚œì´ë„ ì„¤ì •
        function setDifficulty(difficulty) {
            gameState.difficulty = difficulty;
            gameState.timeLeft = difficultySettings[difficulty].timeLimit;
            
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            generateQuestion();
        }
        
        // ìƒˆ ë¬¸ì œ ìƒì„±
        function generateQuestion() {
            const emotionList = emotions[gameState.difficulty];
            const randomEmotion = emotionList[Math.floor(Math.random() * emotionList.length)];
            
            gameState.currentEmotion = randomEmotion;
            
            // ì´ëª¨ì§€ í‘œì‹œ
            document.getElementById('emoji').textContent = randomEmotion.emoji;
            
            // íŒíŠ¸ í‘œì‹œ (ì–´ë ¤ì›€ ëª¨ë“œì—ì„œëŠ” íŒíŠ¸ ì—†ìŒ)
            const hintElement = document.getElementById('emotionHint');
            if (difficultySettings[gameState.difficulty].hintEnabled) {
                hintElement.textContent = randomEmotion.hint;
                hintElement.style.display = 'block';
            } else {
                hintElement.style.display = 'none';
            }
            
            // ë‹µ ë²„íŠ¼ ìƒì„±
            generateAnswerButtons();
        }
        
        // ë‹µ ë²„íŠ¼ ìƒì„±
        function generateAnswerButtons() {
            const buttonsContainer = document.getElementById('answerButtons');
            buttonsContainer.innerHTML = '';
            
            const emotionList = emotions[gameState.difficulty];
            const correctAnswer = gameState.currentEmotion.name;
            
            // ì •ë‹µê³¼ 3ê°œì˜ ì˜¤ë‹µ ìƒì„±
            const answers = [correctAnswer];
            
            while (answers.length < 4) {
                const randomEmotion = emotionList[Math.floor(Math.random() * emotionList.length)];
                if (!answers.includes(randomEmotion.name)) {
                    answers.push(randomEmotion.name);
                }
            }
            
            // ë°°ì—´ ì„ê¸°
            for (let i = answers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [answers[i], answers[j]] = [answers[j], answers[i]];
            }
            
            // ë²„íŠ¼ ìƒì„±
            answers.forEach(emotionName => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = emotionName;
                button.onclick = () => checkAnswer(emotionName);
                buttonsContainer.appendChild(button);
            });
        }
        
        // ë‹µ í™•ì¸
        function checkAnswer(selectedEmotion) {
            const isCorrect = selectedEmotion === gameState.currentEmotion.name;
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
            document.querySelectorAll('.answer-btn').forEach(btn => {
                if (btn.textContent === selectedEmotion) {
                    btn.classList.add(isCorrect ? 'correct' : 'wrong');
                } else if (btn.textContent === gameState.currentEmotion.name) {
                    btn.classList.add('correct');
                }
                btn.disabled = true;
            });
            
            if (isCorrect) {
                gameState.correct++;
                gameState.streak++;
                
                const basePoints = difficultySettings[gameState.difficulty].pointsPerCorrect;
                const streakBonus = Math.floor(gameState.streak / 3) * 5;
                const points = basePoints + streakBonus;
                gameState.score += points;
                
                document.getElementById('feedback').textContent = `ğŸ‰ ì •ë‹µ! +${points}ì `;
                document.getElementById('feedback').className = 'feedback correct';
            } else {
                gameState.wrong++;
                gameState.streak = 0;
                
                document.getElementById('feedback').textContent = `âŒ í‹€ë ¸ìŠµë‹ˆë‹¤! ì •ë‹µ: ${gameState.currentEmotion.name}`;
                document.getElementById('feedback').className = 'feedback wrong';
            }
            
            updateUI();
            
            // 1.5ì´ˆ í›„ ë‹¤ìŒ ë¬¸ì œ
            setTimeout(() => {
                if (gameState.gameRunning) {
                    generateQuestion();
                    document.getElementById('feedback').textContent = '';
                    document.getElementById('feedback').className = 'feedback';
                }
            }, 1500);
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('correct').textContent = gameState.correct;
            document.getElementById('wrong').textContent = gameState.wrong;
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('timeLeft').textContent = gameState.timeLeft;
            document.getElementById('streak').textContent = gameState.streak;
        }
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (1,2,3,4 í‚¤ë¡œ ë‹µ ì„ íƒ)
        document.addEventListener('keydown', (e) => {
            if (e.key >= '1' && e.key <= '4' && gameState.gameRunning) {
                const buttons = document.querySelectorAll('.answer-btn');
                const index = parseInt(e.key) - 1;
                if (buttons[index] && !buttons[index].disabled) {
                    buttons[index].click();
                }
            }
        });
        
        // íƒ€ì´ë¨¸
        setInterval(() => {
            if (gameState.gameRunning && gameState.timeLeft > 0) {
                gameState.timeLeft--;
                updateUI();
                
                if (gameState.timeLeft <= 0) {
                    gameState.gameRunning = false;
                    
                    const accuracy = gameState.correct + gameState.wrong > 0 
                        ? Math.round((gameState.correct / (gameState.correct + gameState.wrong)) * 100) 
                        : 0;
                    
                    setTimeout(() => {
                        alert(`â° ì‹œê°„ ì¢…ë£Œ!\nì •ë‹µ: ${gameState.correct}ê°œ\nì˜¤ë‹µ: ${gameState.wrong}ê°œ\nì •í™•ë„: ${accuracy}%\nìµœì¢… ì ìˆ˜: ${gameState.score}ì `);
                    }, 500);
                }
            }
        }, 1000);
        
        // ê²Œì„ ì‹œì‘
        generateQuestion();
        updateUI();
    </script>
</body>
</html>