<!DOCTYPE html>
<html>
<head>
    <title>ì„œì»¤ìŠ¤ ì €ê¸€ë§ ê²Œì„</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            color: #333;
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        h1 {
            font-size: 3rem;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            animation: rainbow 3s ease-in-out infinite;
        }
        
        @keyframes rainbow {
            0% { color: #ff6b6b; }
            16% { color: #feca57; }
            32% { color: #48dbfb; }
            48% { color: #ff9ff3; }
            64% { color: #54a0ff; }
            80% { color: #5f27cd; }
            100% { color: #ff6b6b; }
        }
        
        .game-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        canvas {
            border: 4px solid #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background: linear-gradient(180deg, #87CEEB 0%, #FFE4B5 100%);
            cursor: pointer;
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            min-width: 200px;
            color: #333;
        }
        
        .info-item {
            margin: 15px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        button {
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            color: #333;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            color: #333;
            backdrop-filter: blur(5px);
        }
        
        #secretMessage {
            display: none;
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: bold;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <h1>ğŸª ì„œì»¤ìŠ¤ ì €ê¸€ë§</h1>
    
    <div class="instructions">
        <p><strong>ğŸ® ê²Œì„ ë°©ë²•:</strong></p>
        <p>ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ì„œ ê³µì„ ê³µì¤‘ì— ë„ì›Œ ì €ê¸€ë§í•˜ì„¸ìš”!</p>
        <p>ê³µì´ ë•…ì— ë–¨ì–´ì§€ì§€ ì•Šê²Œ ê³„ì† íŠ•ê²¨ì£¼ì„¸ìš”!</p>
        <p>ë” ë§ì€ ê³µì„ ë™ì‹œì— ì €ê¸€ë§í• ìˆ˜ë¡ ë†’ì€ ì ìˆ˜!</p>
        <p>ğŸ’– ë¹„ë°€: "ì„œë¯¼ì¬ì‚¬ë‘í•´"ë¥¼ ì…ë ¥í•˜ë©´ íŠ¹ë³„í•œ ì¼ì´...?</p>
    </div>
    
    <div class="game-container">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        
        <div class="game-info">
            <div class="info-item">ì ìˆ˜: <span id="score">0</span></div>
            <div class="info-item">ê³µ ê°œìˆ˜: <span id="ballCount">1</span></div>
            <div class="info-item">ì½¤ë³´: <span id="combo">0</span></div>
            <div class="info-item">ìµœê³  ê¸°ë¡: <span id="bestScore">0</span></div>
            
            <div id="secretMessage">
                ğŸ’– ë¹„ë°€ ì•”í˜¸ í™œì„±í™”!<br>ë¬´ì§€ê°œ ê³µ ëª¨ë“œ ON! ğŸ’–
            </div>
            
            <button onclick="resetGame()">ìƒˆ ê²Œì„</button>
            <button onclick="addBall()">ê³µ ì¶”ê°€</button>
            <button onclick="togglePause()">ì¼ì‹œì •ì§€</button>
        </div>
    </div>

    <script>
        // ìº”ë²„ìŠ¤ ì„¤ì •
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ê²Œì„ ìƒíƒœ
        let gameRunning = true;
        let gamePaused = false;
        let score = 0;
        let combo = 0;
        let bestScore = localStorage.getItem('jugglingBestScore') || 0;
        let mouseX = canvas.width / 2;
        let mouseY = canvas.height / 2;
        
        // ë¹„ë°€ ì•”í˜¸ ê´€ë ¨ ë³€ìˆ˜
        let secretMode = false;
        let secretInput = '';
        const secretPassword = 'ì„œë¯¼ì¬ì‚¬ë‘í•´';
        
        // ê³µë“¤
        let balls = [];
        
        // ì €ê¸€ëŸ¬ ì„¤ì •
        const juggler = {
            x: canvas.width / 2,
            y: canvas.height - 100,
            width: 60,
            height: 80
        };
        
        // ê³µ í´ë˜ìŠ¤
        class Ball {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 6;
                this.vy = -Math.random() * 5 - 5;
                this.radius = 20;
                this.color = color || this.getRandomColor();
                this.trail = [];
                this.bounces = 0;
            }
            
            getRandomColor() {
                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            update() {
                // ì¤‘ë ¥ ì ìš©
                this.vy += 0.4;
                
                // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                this.x += this.vx;
                this.y += this.vy;
                
                // íŠ¸ë ˆì¼ ì—…ë°ì´íŠ¸
                this.trail.push({x: this.x, y: this.y});
                if (this.trail.length > 10) {
                    this.trail.shift();
                }
                
                // ë§ˆìš°ìŠ¤ì™€ì˜ ì¶©ëŒ ê²€ì‚¬ (ì €ê¸€ë§)
                const distToMouse = Math.sqrt((this.x - mouseX)**2 + (this.y - mouseY)**2);
                if (distToMouse < this.radius + 30 && this.vy > 0) {
                    // ê³µì„ ìœ„ë¡œ íŠ•ê²¨ì˜¬ë¦¼
                    const angle = Math.atan2(this.y - mouseY, this.x - mouseX);
                    const force = secretMode ? 15 : 12;
                    this.vx = Math.cos(angle) * force * 0.5;
                    this.vy = Math.sin(angle) * force * -1;
                    
                    this.bounces++;
                    combo++;
                    score += combo * (secretMode ? 20 : 10);
                    
                    // íŒŒí‹°í´ íš¨ê³¼
                    createJuggleParticles(this.x, this.y);
                    
                    // ë¹„ë°€ ëª¨ë“œì—ì„œëŠ” ìƒ‰ê¹” ë³€ê²½
                    if (secretMode) {
                        this.color = `hsl(${Date.now() % 360}, 70%, 60%)`;
                    }
                }
                
                // ë²½ ì¶©ëŒ
                if (this.x - this.radius < 0 || this.x + this.radius > canvas.width) {
                    this.vx *= -0.8;
                    this.x = this.x - this.radius < 0 ? this.radius : canvas.width - this.radius;
                }
                
                // ë°”ë‹¥ ì¶©ëŒ (ê²Œì„ ì˜¤ë²„)
                if (this.y + this.radius > canvas.height - 20) {
                    return false; // ê³µì´ ë–¨ì–´ì§
                }
                
                return true;
            }
            
            draw() {
                // íŠ¸ë ˆì¼ ê·¸ë¦¬ê¸°
                for (let i = 0; i < this.trail.length; i++) {
                    const alpha = i / this.trail.length;
                    ctx.globalAlpha = alpha * 0.5;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.trail[i].x, this.trail[i].y, this.radius * alpha, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.globalAlpha = 1;
                
                // ê³µ ê·¸ë¦¬ê¸°
                const gradient = ctx.createRadialGradient(
                    this.x - 5, this.y - 5, 0,
                    this.x, this.y, this.radius
                );
                gradient.addColorStop(0, 'white');
                gradient.addColorStop(1, this.color);
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // ê³µ í•˜ì´ë¼ì´íŠ¸
                ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                ctx.beginPath();
                ctx.arc(this.x - 6, this.y - 6, 6, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // íŒŒí‹°í´ ì‹œìŠ¤í…œ
        let particles = [];
        
        function createJuggleParticles(x, y) {
            for (let i = 0; i < 8; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 30,
                    color: secretMode ? `hsl(${Date.now() % 360}, 70%, 60%)` : '#ffd700'
                });
            }
        }
        
        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2;
                p.life--;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }
        
        // ì´ˆê¸°í™”
        document.getElementById('bestScore').textContent = bestScore;
        balls.push(new Ball(canvas.width / 2, 200));
        
        // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ë¹„ë°€ ì•”í˜¸)
        document.addEventListener('keydown', (e) => {
            if (e.key.length === 1) {
                secretInput += e.key;
                if (secretInput.length > secretPassword.length) {
                    secretInput = secretInput.slice(-secretPassword.length);
                }
                
                if (secretInput === secretPassword) {
                    secretMode = !secretMode;
                    document.getElementById('secretMessage').style.display = secretMode ? 'block' : 'none';
                    secretInput = '';
                }
            }
        });
        
        function addBall() {
            if (balls.length < 5) {
                balls.push(new Ball(
                    canvas.width / 2 + (Math.random() - 0.5) * 100,
                    200 + Math.random() * 100
                ));
                document.getElementById('ballCount').textContent = balls.length;
            }
        }
        
        function resetGame() {
            balls = [new Ball(canvas.width / 2, 200)];
            particles = [];
            score = 0;
            combo = 0;
            
            document.getElementById('score').textContent = score;
            document.getElementById('ballCount').textContent = balls.length;
            document.getElementById('combo').textContent = combo;
            
            gameRunning = true;
            gamePaused = false;
        }
        
        function togglePause() {
            gamePaused = !gamePaused;
        }
        
        function gameOver() {
            gameRunning = false;
            
            if (score > bestScore) {
                bestScore = score;
                localStorage.setItem('jugglingBestScore', bestScore);
                document.getElementById('bestScore').textContent = bestScore;
            }
        }
        
        function draw() {
            // ë°°ê²½ ê·¸ë¦¬ê¸°
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, secretMode ? '#1a1a2e' : '#87CEEB');
            gradient.addColorStop(1, secretMode ? '#16213e' : '#FFE4B5');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ì„œì»¤ìŠ¤ í…íŠ¸ ë°°ê²½
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            for (let i = 0; i < 8; i++) {
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 0);
                ctx.lineTo(i * (canvas.width / 8), canvas.height);
                ctx.lineTo((i + 1) * (canvas.width / 8), canvas.height);
                ctx.closePath();
                if (i % 2 === 0) ctx.fill();
            }
            
            // ì €ê¸€ëŸ¬ ê·¸ë¦¬ê¸°
            juggler.x = mouseX;
            
            // ì €ê¸€ëŸ¬ ëª¸
            ctx.fillStyle = secretMode ? '#ff6b6b' : '#4ecdc4';
            ctx.fillRect(juggler.x - juggler.width/2, juggler.y, juggler.width, juggler.height);
            
            // ì €ê¸€ëŸ¬ ë¨¸ë¦¬
            ctx.fillStyle = '#fdbcb4';
            ctx.beginPath();
            ctx.arc(juggler.x, juggler.y, 25, 0, Math.PI * 2);
            ctx.fill();
            
            // ì €ê¸€ëŸ¬ ëª¨ì
            ctx.fillStyle = secretMode ? '#ffd700' : '#e74c3c';
            ctx.beginPath();
            ctx.arc(juggler.x, juggler.y - 10, 30, Math.PI, 0);
            ctx.fill();
            
            // ì €ê¸€ëŸ¬ ì†
            ctx.fillStyle = '#fdbcb4';
            ctx.beginPath();
            ctx.arc(juggler.x - 35, juggler.y + 30, 12, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(juggler.x + 35, juggler.y + 30, 12, 0, Math.PI * 2);
            ctx.fill();
            
            // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ í‘œì‹œ (ì €ê¸€ë§ ë²”ìœ„)
            ctx.strokeStyle = secretMode ? '#ffd700' : 'rgba(255, 255, 255, 0.5)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 30, 0, Math.PI * 2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // ê³µë“¤ ê·¸ë¦¬ê¸°
            for (let ball of balls) {
                ball.draw();
            }
            
            // íŒŒí‹°í´ ê·¸ë¦¬ê¸°
            for (let p of particles) {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 30;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 4, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.globalAlpha = 1;
            
            // ë°”ë‹¥ ê·¸ë¦¬ê¸°
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
            
            // ê²Œì„ ì˜¤ë²„ í™”ë©´
            if (!gameRunning) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#fff';
                ctx.font = '48px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ê²Œì„ ì˜¤ë²„!', canvas.width/2, canvas.height/2 - 50);
                
                ctx.font = '24px Arial';
                ctx.fillText(`ìµœì¢… ì ìˆ˜: ${score}`, canvas.width/2, canvas.height/2);
                ctx.fillText(`ìµœëŒ€ ì½¤ë³´: ${combo}`, canvas.width/2, canvas.height/2 + 30);
            }
        }
        
        function gameLoop() {
            if (gameRunning && !gamePaused) {
                // ê³µë“¤ ì—…ë°ì´íŠ¸
                for (let i = balls.length - 1; i >= 0; i--) {
                    if (!balls[i].update()) {
                        // ê³µì´ ë–¨ì–´ì§ - ê²Œì„ ì˜¤ë²„
                        gameOver();
                        break;
                    }
                }
                
                updateParticles();
                
                // UI ì—…ë°ì´íŠ¸
                document.getElementById('score').textContent = score;
                document.getElementById('combo').textContent = combo;
                
                // ì½¤ë³´ ê°ì†Œ
                if (combo > 0 && Math.random() < 0.01) {
                    combo = Math.max(0, combo - 1);
                }
            }
            
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        // ê²Œì„ ì‹œì‘
        gameLoop();
    </script>
</body>
</html>