<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒˆ ìƒ‰ê¹” ë§ì¶”ê¸°</title>
    
    <!-- Google Analytics -->
    <script src="../../analytics.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        
        .game-container {
            text-align: center;
            background: rgba(0,0,0,0.8);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #9370DB;
            max-width: 600px;
        }
        
        .ui {
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(147, 112, 219, 0.8);
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .question-area {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 15px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .color-word {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            transition: all 0.3s;
        }
        
        .instruction {
            font-size: 18px;
            margin-bottom: 20px;
            color: #FFD700;
        }
        
        .answer-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .answer-btn {
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .answer-btn:active {
            transform: scale(0.95);
        }
        
        .feedback {
            font-size: 24px;
            font-weight: bold;
            margin: 15px 0;
            min-height: 30px;
        }
        
        .feedback.correct {
            color: #00FF7F;
        }
        
        .feedback.wrong {
            color: #FF6B6B;
        }
        
        .streak-indicator {
            font-size: 20px;
            margin: 10px 0;
            color: #FFD700;
        }
        
        .difficulty-selector {
            margin: 20px 0;
        }
        
        .difficulty-btn {
            background: #4169E1;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .difficulty-btn.active {
            background: #FF4500;
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.5);
        }
        
        .controls {
            margin-top: 20px;
            font-size: 14px;
            color: #ccc;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸŒˆ ìƒ‰ê¹” ë§ì¶”ê¸° ê²Œì„</h1>
        
        <div class="ui">
            <div class="stat">âœ… ì •ë‹µ: <span id="correct">0</span></div>
            <div class="stat">âŒ ì˜¤ë‹µ: <span id="wrong">0</span></div>
            <div class="stat">â­ ì ìˆ˜: <span id="score">0</span></div>
            <div class="stat">â° ì‹œê°„: <span id="timeLeft">60</span>ì´ˆ</div>
        </div>
        
        <div class="streak-indicator">
            ğŸ”¥ ì—°ì† ì •ë‹µ: <span id="streak">0</span>ê°œ
        </div>
        
        <div class="difficulty-selector">
            <button class="difficulty-btn active" onclick="setDifficulty('easy')">ì‰¬ì›€</button>
            <button class="difficulty-btn" onclick="setDifficulty('medium')">ë³´í†µ</button>
            <button class="difficulty-btn" onclick="setDifficulty('hard')">ì–´ë ¤ì›€</button>
        </div>
        
        <div class="question-area">
            <div class="instruction" id="instruction">ë‹¤ìŒ ê¸€ìì˜ ìƒ‰ê¹”ì„ ë§ì¶°ë³´ì„¸ìš”!</div>
            <div class="color-word" id="colorWord">ë¹¨ê°•</div>
        </div>
        
        <div class="answer-buttons" id="answerButtons">
            <!-- ë‹µ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="controls">
            <p>ğŸ® ì¡°ì‘ë²•: í™”ë©´ì— í‘œì‹œëœ ê¸€ìì˜ ì‹¤ì œ ìƒ‰ê¹”ì„ ë§ì¶°ë³´ì„¸ìš”!</p>
            <p>ğŸ§  ìŠ¤íŠ¸ë£¹ íš¨ê³¼: ê¸€ìì˜ ì˜ë¯¸ì™€ ìƒ‰ê¹”ì´ ë‹¤ë¥¼ ë•Œ ë‡Œê°€ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•´ìš”!</p>
            <p>ğŸ’¡ íŒ: ê¸€ìë¥¼ ì½ì§€ ë§ê³  ìƒ‰ê¹”ë§Œ ë³´ì„¸ìš”!</p>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            correct: 0,
            wrong: 0,
            score: 0,
            streak: 0,
            timeLeft: 60,
            difficulty: 'easy',
            gameRunning: true,
            currentQuestion: null
        };
        
        // ìƒ‰ê¹” ë°ì´í„°
        const colors = {
            'ë¹¨ê°•': '#FF0000',
            'íŒŒë‘': '#0000FF',
            'ì´ˆë¡': '#00FF00',
            'ë…¸ë‘': '#FFFF00',
            'ë³´ë¼': '#800080',
            'ì£¼í™©': '#FFA500',
            'ë¶„í™': '#FF69B4',
            'í•˜ëŠ˜': '#87CEEB',
            'ê°ˆìƒ‰': '#8B4513',
            'ê²€ì •': '#000000'
        };
        
        const colorNames = Object.keys(colors);
        
        // ë‚œì´ë„ë³„ ì„¤ì •
        const difficultySettings = {
            easy: { 
                timeLimit: 60, 
                pointsPerCorrect: 10,
                matchProbability: 0.5 // 50% í™•ë¥ ë¡œ ê¸€ìì™€ ìƒ‰ê¹”ì´ ì¼ì¹˜
            },
            medium: { 
                timeLimit: 45, 
                pointsPerCorrect: 15,
                matchProbability: 0.3 // 30% í™•ë¥ ë¡œ ì¼ì¹˜
            },
            hard: { 
                timeLimit: 30, 
                pointsPerCorrect: 25,
                matchProbability: 0.1 // 10% í™•ë¥ ë¡œ ì¼ì¹˜
            }
        };
        
        // ë‚œì´ë„ ì„¤ì •
        function setDifficulty(difficulty) {
            gameState.difficulty = difficulty;
            gameState.timeLeft = difficultySettings[difficulty].timeLimit;
            
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            generateQuestion();
        }
        
        // ìƒˆ ë¬¸ì œ ìƒì„±
        function generateQuestion() {
            const settings = difficultySettings[gameState.difficulty];
            
            // ëœë¤ ê¸€ì ì„ íƒ
            const wordName = colorNames[Math.floor(Math.random() * colorNames.length)];
            
            // ìƒ‰ê¹” ê²°ì • (ë‚œì´ë„ì— ë”°ë¼ ì¼ì¹˜ í™•ë¥  ì¡°ì •)
            let colorName;
            if (Math.random() < settings.matchProbability) {
                colorName = wordName; // ê¸€ìì™€ ìƒ‰ê¹” ì¼ì¹˜
            } else {
                do {
                    colorName = colorNames[Math.floor(Math.random() * colorNames.length)];
                } while (colorName === wordName); // ê¸€ìì™€ ìƒ‰ê¹” ë¶ˆì¼ì¹˜
            }
            
            gameState.currentQuestion = {
                word: wordName,
                color: colorName,
                correctAnswer: colorName
            };
            
            // í™”ë©´ì— í‘œì‹œ
            const colorWordElement = document.getElementById('colorWord');
            colorWordElement.textContent = wordName;
            colorWordElement.style.color = colors[colorName];
            
            // ë‹µ ë²„íŠ¼ ìƒì„±
            generateAnswerButtons();
            
            // ì§€ì‹œì‚¬í•­ ì—…ë°ì´íŠ¸
            const instructions = [
                'ë‹¤ìŒ ê¸€ìì˜ ìƒ‰ê¹”ì„ ë§ì¶°ë³´ì„¸ìš”!',
                'ê¸€ìë¥¼ ì½ì§€ ë§ê³  ìƒ‰ê¹”ë§Œ ë³´ì„¸ìš”!',
                'ì´ ê¸€ìëŠ” ë¬´ìŠ¨ ìƒ‰ì¸ê°€ìš”?',
                'ì‹¤ì œ ìƒ‰ê¹”ì„ ì„ íƒí•˜ì„¸ìš”!'
            ];
            document.getElementById('instruction').textContent = 
                instructions[Math.floor(Math.random() * instructions.length)];
        }
        
        // ë‹µ ë²„íŠ¼ ìƒì„±
        function generateAnswerButtons() {
            const buttonsContainer = document.getElementById('answerButtons');
            buttonsContainer.innerHTML = '';
            
            // ì •ë‹µê³¼ 3ê°œì˜ ì˜¤ë‹µ ìƒì„±
            const answers = [gameState.currentQuestion.correctAnswer];
            
            while (answers.length < 4) {
                const randomColor = colorNames[Math.floor(Math.random() * colorNames.length)];
                if (!answers.includes(randomColor)) {
                    answers.push(randomColor);
                }
            }
            
            // ë°°ì—´ ì„ê¸°
            for (let i = answers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [answers[i], answers[j]] = [answers[j], answers[i]];
            }
            
            // ë²„íŠ¼ ìƒì„±
            answers.forEach(colorName => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = colorName;
                button.style.backgroundColor = colors[colorName];
                
                // ê²€ì •ìƒ‰ì¼ ë•ŒëŠ” í° ê¸€ì, ë‚˜ë¨¸ì§€ëŠ” ê²€ì • ê¸€ì
                if (colorName === 'ê²€ì •') {
                    button.style.color = 'white';
                } else {
                    button.style.color = 'white';
                }
                
                button.onclick = () => checkAnswer(colorName);
                buttonsContainer.appendChild(button);
            });
        }
        
        // ë‹µ í™•ì¸
        function checkAnswer(selectedColor) {
            const isCorrect = selectedColor === gameState.currentQuestion.correctAnswer;
            
            if (isCorrect) {
                gameState.correct++;
                gameState.streak++;
                
                const basePoints = difficultySettings[gameState.difficulty].pointsPerCorrect;
                const streakBonus = Math.floor(gameState.streak / 5) * 5;
                const points = basePoints + streakBonus;
                gameState.score += points;
                
                document.getElementById('feedback').textContent = `ğŸ‰ ì •ë‹µ! +${points}ì `;
                document.getElementById('feedback').className = 'feedback correct';
            } else {
                gameState.wrong++;
                gameState.streak = 0;
                
                document.getElementById('feedback').textContent = `âŒ í‹€ë ¸ìŠµë‹ˆë‹¤! ì •ë‹µ: ${gameState.currentQuestion.correctAnswer}`;
                document.getElementById('feedback').className = 'feedback wrong';
            }
            
            // ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === gameState.currentQuestion.correctAnswer) {
                    btn.style.border = '3px solid #00FF00';
                } else if (btn.textContent === selectedColor && !isCorrect) {
                    btn.style.border = '3px solid #FF0000';
                }
            });
            
            updateUI();
            
            // 1.5ì´ˆ í›„ ë‹¤ìŒ ë¬¸ì œ
            setTimeout(() => {
                if (gameState.gameRunning) {
                    generateQuestion();
                    document.getElementById('feedback').textContent = '';
                    document.getElementById('feedback').className = 'feedback';
                }
            }, 1500);
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('correct').textContent = gameState.correct;
            document.getElementById('wrong').textContent = gameState.wrong;
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('timeLeft').textContent = gameState.timeLeft;
            document.getElementById('streak').textContent = gameState.streak;
        }
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (1,2,3,4 í‚¤ë¡œ ë‹µ ì„ íƒ)
        document.addEventListener('keydown', (e) => {
            if (e.key >= '1' && e.key <= '4' && gameState.gameRunning) {
                const buttons = document.querySelectorAll('.answer-btn');
                const index = parseInt(e.key) - 1;
                if (buttons[index] && !buttons[index].disabled) {
                    buttons[index].click();
                }
            }
        });
        
        // íƒ€ì´ë¨¸
        setInterval(() => {
            if (gameState.gameRunning && gameState.timeLeft > 0) {
                gameState.timeLeft--;
                updateUI();
                
                if (gameState.timeLeft <= 0) {
                    gameState.gameRunning = false;
                    
                    const accuracy = gameState.correct + gameState.wrong > 0 
                        ? Math.round((gameState.correct / (gameState.correct + gameState.wrong)) * 100) 
                        : 0;
                    
                    setTimeout(() => {
                        alert(`â° ì‹œê°„ ì¢…ë£Œ!\nì •ë‹µ: ${gameState.correct}ê°œ\nì˜¤ë‹µ: ${gameState.wrong}ê°œ\nì •í™•ë„: ${accuracy}%\nìµœì¢… ì ìˆ˜: ${gameState.score}ì `);
                    }, 500);
                }
            }
        }, 1000);
        
        // ê²Œì„ ì‹œì‘
        generateQuestion();
        updateUI();
    </script>
</body>
</html>