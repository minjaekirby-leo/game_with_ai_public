<!DOCTYPE html>
<html>
<head>
    <title>ë‹¤íŠ¸ ê²Œì„</title>
    
    <!-- Google Analytics -->
    <script src="../../analytics.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        h1 {
            font-size: 3rem;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
            to { text-shadow: 0 0 30px rgba(255, 255, 255, 0.8); }
        }
        
        .game-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        canvas {
            border: 4px solid #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background: #2c3e50;
            cursor: crosshair;
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            min-width: 200px;
        }
        
        .info-item {
            margin: 15px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            backdrop-filter: blur(5px);
        }
        
        #secretMessage {
            display: none;
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: bold;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ ë‹¤íŠ¸ ê²Œì„</h1>
    
    <div class="instructions">
        <p><strong>ğŸ® ê²Œì„ ë°©ë²•:</strong></p>
        <p>ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ì„œ ì¡°ì¤€í•˜ê³  í´ë¦­í•´ì„œ ë‹¤íŠ¸ë¥¼ ë˜ì§€ì„¸ìš”!</p>
        <p>ê³¼ë…ì˜ ì¤‘ì‹¬ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ë†’ì€ ì ìˆ˜ë¥¼ ì–»ìŠµë‹ˆë‹¤!</p>
        <p>ğŸ’– ë¹„ë°€: "ì„œë¯¼ì¬ì‚¬ë‘í•´"ë¥¼ ì…ë ¥í•˜ë©´ íŠ¹ë³„í•œ ì¼ì´...?</p>
    </div>
    
    <div class="game-container">
        <canvas id="gameCanvas" width="600" height="600"></canvas>
        
        <div class="game-info">
            <div class="info-item">ì ìˆ˜: <span id="score">0</span></div>
            <div class="info-item">ë‹¤íŠ¸: <span id="darts">3</span>/3</div>
            <div class="info-item">ë¼ìš´ë“œ: <span id="round">1</span></div>
            <div class="info-item">ìµœê³  ê¸°ë¡: <span id="bestScore">0</span></div>
            
            <div id="secretMessage">
                ğŸ’– ë¹„ë°€ ì•”í˜¸ í™œì„±í™”!<br>ìŠˆí¼ ì •í™•ë„ ëª¨ë“œ ON! ğŸ’–
            </div>
            
            <button onclick="resetGame()">ìƒˆ ê²Œì„</button>
            <button onclick="nextRound()">ë‹¤ìŒ ë¼ìš´ë“œ</button>
        </div>
    </div>

    <script>
        // ìº”ë²„ìŠ¤ ì„¤ì •
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ê²Œì„ ìƒíƒœ
        let gameRunning = true;
        let score = 0;
        let darts = 3;
        let round = 1;
        let bestScore = localStorage.getItem('dartBestScore') || 0;
        let mouseX = 0;
        let mouseY = 0;
        let isAiming = true;
        
        // ë¹„ë°€ ì•”í˜¸ ê´€ë ¨ ë³€ìˆ˜
        let secretMode = false;
        let secretInput = '';
        const secretPassword = 'ì„œë¯¼ì¬ì‚¬ë‘í•´';
        
        // ë‹¤íŠ¸ ì„¤ì •
        let dartX = 50;
        let dartY = canvas.height / 2;
        let dartVelX = 0;
        let dartVelY = 0;
        let dartFlying = false;
        
        // ê³¼ë… ì„¤ì •
        const targetX = canvas.width - 100;
        const targetY = canvas.height / 2;
        const targetRadius = 150;
        
        // ì ìˆ˜ ì˜ì—­ë“¤ (ë°˜ì§€ë¦„ê³¼ ì ìˆ˜)
        const scoreRings = [
            { radius: 20, score: 100, color: '#ffd700' },  // ë¶ˆìŠ¤ì•„ì´
            { radius: 40, score: 50, color: '#ff6b6b' },   // ë¹¨ê°„ìƒ‰
            { radius: 70, score: 25, color: '#4ecdc4' },   // ì²­ë¡ìƒ‰
            { radius: 100, score: 10, color: '#95e1d3' },  // ì—°í•œ ì²­ë¡ìƒ‰
            { radius: 130, score: 5, color: '#f8b500' },   // ì£¼í™©ìƒ‰
            { radius: 150, score: 1, color: '#ddd' }       // íšŒìƒ‰
        ];
        
        // ì´ˆê¸°í™”
        document.getElementById('bestScore').textContent = bestScore;
        
        // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });
        
        canvas.addEventListener('click', (e) => {
            if (isAiming && darts > 0 && !dartFlying) {
                throwDart();
            }
        });
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ë¹„ë°€ ì•”í˜¸)
        document.addEventListener('keydown', (e) => {
            if (e.key.length === 1) {
                secretInput += e.key;
                if (secretInput.length > secretPassword.length) {
                    secretInput = secretInput.slice(-secretPassword.length);
                }
                
                if (secretInput === secretPassword) {
                    secretMode = !secretMode;
                    document.getElementById('secretMessage').style.display = secretMode ? 'block' : 'none';
                    secretInput = '';
                }
            }
        });
        
        function throwDart() {
            const angle = Math.atan2(mouseY - dartY, mouseX - dartX);
            const power = secretMode ? 15 : 10; // ë¹„ë°€ ëª¨ë“œì—ì„œëŠ” ë” ê°•í•œ íŒŒì›Œ
            
            dartVelX = Math.cos(angle) * power;
            dartVelY = Math.sin(angle) * power;
            dartFlying = true;
            isAiming = false;
            
            darts--;
            document.getElementById('darts').textContent = darts;
        }
        
        function updateDart() {
            if (dartFlying) {
                dartX += dartVelX;
                dartY += dartVelY;
                
                // ì¤‘ë ¥ íš¨ê³¼ (ë¹„ë°€ ëª¨ë“œì—ì„œëŠ” ì¤‘ë ¥ ë¬´ì‹œ)
                if (!secretMode) {
                    dartVelY += 0.2;
                }
                
                // ê³¼ë…ì— ë„ë‹¬í–ˆëŠ”ì§€ í™•ì¸
                const distToTarget = Math.sqrt((dartX - targetX) ** 2 + (dartY - targetY) ** 2);
                
                if (dartX >= targetX - 10 || dartX > canvas.width) {
                    dartFlying = false;
                    
                    // ì ìˆ˜ ê³„ì‚°
                    if (distToTarget <= targetRadius) {
                        let hitScore = 0;
                        for (let ring of scoreRings) {
                            if (distToTarget <= ring.radius) {
                                hitScore = ring.score;
                                break;
                            }
                        }
                        
                        if (secretMode) hitScore *= 2; // ë¹„ë°€ ëª¨ë“œì—ì„œëŠ” 2ë°° ì ìˆ˜
                        score += hitScore;
                        document.getElementById('score').textContent = score;
                        
                        // íŒŒí‹°í´ íš¨ê³¼
                        createHitParticles(dartX, dartY, hitScore);
                    }
                    
                    // ë‹¤íŠ¸ ë¦¬ì…‹
                    setTimeout(() => {
                        dartX = 50;
                        dartY = canvas.height / 2;
                        isAiming = true;
                        
                        // ëª¨ë“  ë‹¤íŠ¸ë¥¼ ì‚¬ìš©í–ˆìœ¼ë©´ ë¼ìš´ë“œ ì¢…ë£Œ
                        if (darts === 0) {
                            endRound();
                        }
                    }, 1000);
                }
            }
        }
        
        let particles = [];
        
        function createHitParticles(x, y, score) {
            for (let i = 0; i < 10; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 30,
                    color: score >= 50 ? '#ffd700' : '#ff6b6b'
                });
            }
        }
        
        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }
        
        function endRound() {
            if (score > bestScore) {
                bestScore = score;
                localStorage.setItem('dartBestScore', bestScore);
                document.getElementById('bestScore').textContent = bestScore;
            }
        }
        
        function nextRound() {
            round++;
            darts = 3;
            document.getElementById('round').textContent = round;
            document.getElementById('darts').textContent = darts;
            
            dartX = 50;
            dartY = canvas.height / 2;
            isAiming = true;
            dartFlying = false;
        }
        
        function resetGame() {
            score = 0;
            darts = 3;
            round = 1;
            document.getElementById('score').textContent = score;
            document.getElementById('darts').textContent = darts;
            document.getElementById('round').textContent = round;
            
            dartX = 50;
            dartY = canvas.height / 2;
            isAiming = true;
            dartFlying = false;
            particles = [];
        }
        
        function draw() {
            // ë°°ê²½ ê·¸ë¦¬ê¸°
            ctx.fillStyle = secretMode ? '#1a1a2e' : '#2c3e50';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ê³¼ë… ê·¸ë¦¬ê¸°
            for (let i = scoreRings.length - 1; i >= 0; i--) {
                const ring = scoreRings[i];
                ctx.fillStyle = ring.color;
                ctx.beginPath();
                ctx.arc(targetX, targetY, ring.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // ì ìˆ˜ í‘œì‹œ
                if (i % 2 === 0) {
                    ctx.fillStyle = '#333';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(ring.score, targetX, targetY - ring.radius + 20);
                }
            }
            
            // ê³¼ë… í…Œë‘ë¦¬
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(targetX, targetY, targetRadius, 0, Math.PI * 2);
            ctx.stroke();
            
            // ì¡°ì¤€ì„  ê·¸ë¦¬ê¸° (ì¡°ì¤€ ì¤‘ì¼ ë•Œ)
            if (isAiming && !dartFlying) {
                ctx.strokeStyle = secretMode ? '#ffd700' : '#fff';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(dartX, dartY);
                ctx.lineTo(mouseX, mouseY);
                ctx.stroke();
                ctx.setLineDash([]);
            }
            
            // ë‹¤íŠ¸ ê·¸ë¦¬ê¸°
            ctx.fillStyle = secretMode ? '#ffd700' : '#8b4513';
            ctx.beginPath();
            ctx.arc(dartX, dartY, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // ë‹¤íŠ¸ ê¹ƒí„¸
            ctx.fillStyle = secretMode ? '#ff6b6b' : '#ff0000';
            ctx.fillRect(dartX - 15, dartY - 3, 10, 6);
            
            // íŒŒí‹°í´ ê·¸ë¦¬ê¸°
            for (let p of particles) {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 30;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.globalAlpha = 1;
        }
        
        function gameLoop() {
            updateDart();
            updateParticles();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        // ê²Œì„ ì‹œì‘
        gameLoop();
    </script>
</body>
</html>