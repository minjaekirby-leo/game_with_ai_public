<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ  ì§‘ ê¾¸ë¯¸ê¸° ê²Œì„</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #FFE4E1, #FFF8DC);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }
        
        .game-container {
            text-align: center;
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #DDA0DD;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .room-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        
        canvas {
            border: 3px solid #DDA0DD;
            border-radius: 10px;
            background: #F5F5DC;
            cursor: crosshair;
        }
        
        .furniture-panel {
            width: 200px;
            background: rgba(221, 160, 221, 0.2);
            border-radius: 10px;
            padding: 15px;
        }
        
        .furniture-category {
            margin-bottom: 20px;
        }
        
        .category-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #8B008B;
            border-bottom: 2px solid #DDA0DD;
            padding-bottom: 5px;
        }
        
        .furniture-item {
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 8px;
            background: #DDA0DD;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .furniture-item:hover {
            background: #DA70D6;
            transform: scale(1.05);
        }
        
        .furniture-item.selected {
            background: #8B008B;
            box-shadow: 0 0 10px rgba(139, 0, 139, 0.5);
        }
        
        .ui {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(221, 160, 221, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            font-weight: bold;
            color: white;
        }
        
        .controls {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }
        
        .action-buttons {
            margin: 10px 0;
        }
        
        .action-btn {
            background: #FF69B4;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            background: #FF1493;
            transform: scale(1.05);
        }
        
        .room-selector {
            margin: 10px 0;
        }
        
        .room-btn {
            background: #9370DB;
            color: white;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .room-btn.active {
            background: #4B0082;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ  ì§‘ ê¾¸ë¯¸ê¸° ê²Œì„</h1>
        
        <div class="ui">
            <div class="stat">ğŸ’° ì˜ˆì‚°: <span id="budget">1000</span>ì›</div>
            <div class="stat">ğŸ›‹ï¸ ê°€êµ¬: <span id="furnitureCount">0</span>ê°œ</div>
            <div class="stat">â­ ë§Œì¡±ë„: <span id="satisfaction">0</span>%</div>
        </div>
        
        <div class="room-selector">
            <button class="room-btn active" onclick="selectRoom('living')">ê±°ì‹¤</button>
            <button class="room-btn" onclick="selectRoom('bedroom')">ì¹¨ì‹¤</button>
            <button class="room-btn" onclick="selectRoom('kitchen')">ë¶€ì—Œ</button>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn" onclick="clearRoom()">ğŸ—‘ï¸ ë°© ë¹„ìš°ê¸°</button>
            <button class="action-btn" onclick="saveRoom()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
            <button class="action-btn" onclick="showSatisfaction()">â­ ë§Œì¡±ë„ í™•ì¸</button>
        </div>
        
        <div class="room-container">
            <div class="furniture-panel">
                <div class="furniture-category">
                    <div class="category-title">ğŸ›‹ï¸ ì†ŒíŒŒ & ì˜ì</div>
                    <button class="furniture-item" onclick="selectFurniture('sofa', 150, 'ğŸ›‹ï¸')">ì†ŒíŒŒ (150ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('chair', 80, 'ğŸª‘')">ì˜ì (80ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('armchair', 120, 'ğŸ›‹ï¸')">ì•ˆë½ì˜ì (120ì›)</button>
                </div>
                
                <div class="furniture-category">
                    <div class="category-title">ğŸ“º ì „ìì œí’ˆ</div>
                    <button class="furniture-item" onclick="selectFurniture('tv', 200, 'ğŸ“º')">TV (200ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('computer', 180, 'ğŸ’»')">ì»´í“¨í„° (180ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('radio', 60, 'ğŸ“»')">ë¼ë””ì˜¤ (60ì›)</button>
                </div>
                
                <div class="furniture-category">
                    <div class="category-title">ğŸ›ï¸ ì¹¨ì‹¤ ê°€êµ¬</div>
                    <button class="furniture-item" onclick="selectFurniture('bed', 250, 'ğŸ›ï¸')">ì¹¨ëŒ€ (250ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('wardrobe', 180, 'ğŸšª')">ì˜·ì¥ (180ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('nightstand', 90, 'ğŸ—„ï¸')">í˜‘íƒ (90ì›)</button>
                </div>
                
                <div class="furniture-category">
                    <div class="category-title">ğŸ½ï¸ ë¶€ì—Œ ê°€êµ¬</div>
                    <button class="furniture-item" onclick="selectFurniture('table', 120, 'ğŸ½ï¸')">ì‹íƒ (120ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('fridge', 300, 'ğŸ§Š')">ëƒ‰ì¥ê³  (300ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('stove', 200, 'ğŸ”¥')">ê°€ìŠ¤ë ˆì¸ì§€ (200ì›)</button>
                </div>
                
                <div class="furniture-category">
                    <div class="category-title">ğŸŒ¿ ì¥ì‹í’ˆ</div>
                    <button class="furniture-item" onclick="selectFurniture('plant', 40, 'ğŸŒ±')">í™”ë¶„ (40ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('painting', 70, 'ğŸ–¼ï¸')">ê·¸ë¦¼ (70ì›)</button>
                    <button class="furniture-item" onclick="selectFurniture('lamp', 50, 'ğŸ’¡')">ë¨í”„ (50ì›)</button>
                </div>
            </div>
            
            <canvas id="gameCanvas" width="600" height="500"></canvas>
        </div>
        
        <div class="controls">
            <p>ğŸ® ì¡°ì‘ë²•: ì™¼ìª½ì—ì„œ ê°€êµ¬ë¥¼ ì„ íƒí•˜ê³  ë°©ì— í´ë¦­í•´ì„œ ë°°ì¹˜í•˜ì„¸ìš”!</p>
            <p>ğŸ’¡ íŒ: ê°€êµ¬ë¥¼ ì ì ˆíˆ ë°°ì¹˜í•˜ë©´ ë§Œì¡±ë„ê°€ ì˜¬ë¼ê°€ìš”! ì˜ˆì‚°ì„ ì˜ ê´€ë¦¬í•˜ì„¸ìš”!</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            budget: 1000,
            furnitureCount: 0,
            satisfaction: 0,
            selectedFurniture: null,
            currentRoom: 'living'
        };
        
        // ë°©ë³„ ê°€êµ¬ ì €ì¥
        let rooms = {
            living: [],
            bedroom: [],
            kitchen: []
        };
        
        // ë°© ë°°ê²½ìƒ‰
        const roomColors = {
            living: '#F5F5DC',
            bedroom: '#E6E6FA',
            kitchen: '#F0F8FF'
        };
        
        // ë°© ì´ë¦„
        const roomNames = {
            living: 'ê±°ì‹¤',
            bedroom: 'ì¹¨ì‹¤',
            kitchen: 'ë¶€ì—Œ'
        };
        
        // ê°€êµ¬ ì„ íƒ
        function selectFurniture(type, cost, emoji) {
            if (gameState.budget >= cost) {
                gameState.selectedFurniture = {
                    type: type,
                    cost: cost,
                    emoji: emoji,
                    size: getFurnitureSize(type)
                };
                
                // ì„ íƒëœ ë²„íŠ¼ í‘œì‹œ
                document.querySelectorAll('.furniture-item').forEach(btn => btn.classList.remove('selected'));
                event.target.classList.add('selected');
                
                canvas.style.cursor = 'crosshair';
            } else {
                alert('ì˜ˆì‚°ì´ ë¶€ì¡±í•©ë‹ˆë‹¤!');
            }
        }
        
        // ê°€êµ¬ í¬ê¸° ë°˜í™˜
        function getFurnitureSize(type) {
            const sizes = {
                sofa: { width: 80, height: 40 },
                chair: { width: 30, height: 30 },
                armchair: { width: 40, height: 40 },
                tv: { width: 60, height: 40 },
                computer: { width: 50, height: 30 },
                radio: { width: 25, height: 25 },
                bed: { width: 100, height: 60 },
                wardrobe: { width: 50, height: 80 },
                nightstand: { width: 30, height: 30 },
                table: { width: 80, height: 50 },
                fridge: { width: 40, height: 60 },
                stove: { width: 50, height: 40 },
                plant: { width: 20, height: 20 },
                painting: { width: 40, height: 30 },
                lamp: { width: 15, height: 15 }
            };
            return sizes[type] || { width: 30, height: 30 };
        }
        
        // ë°© ì„ íƒ
        function selectRoom(room) {
            gameState.currentRoom = room;
            document.querySelectorAll('.room-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            render();
        }
        
        // ìº”ë²„ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸
        canvas.addEventListener('click', (e) => {
            if (!gameState.selectedFurniture) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // ê°€êµ¬ ë°°ì¹˜ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
            if (canPlaceFurniture(x, y, gameState.selectedFurniture)) {
                placeFurniture(x, y, gameState.selectedFurniture);
                gameState.budget -= gameState.selectedFurniture.cost;
                gameState.furnitureCount++;
                gameState.selectedFurniture = null;
                
                // ì„ íƒ í•´ì œ
                document.querySelectorAll('.furniture-item').forEach(btn => btn.classList.remove('selected'));
                canvas.style.cursor = 'default';
                
                calculateSatisfaction();
                updateUI();
            } else {
                alert('ì—¬ê¸°ì—ëŠ” ê°€êµ¬ë¥¼ ë†“ì„ ìˆ˜ ì—†ì–´ìš”!');
            }
        });
        
        // ê°€êµ¬ ë°°ì¹˜ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
        function canPlaceFurniture(x, y, furniture) {
            const currentRoomFurniture = rooms[gameState.currentRoom];
            
            // ê²½ê³„ ì²´í¬
            if (x < 0 || y < 0 || x + furniture.size.width > canvas.width || y + furniture.size.height > canvas.height) {
                return false;
            }
            
            // ë‹¤ë¥¸ ê°€êµ¬ì™€ ê²¹ì¹˜ëŠ”ì§€ ì²´í¬
            for (let item of currentRoomFurniture) {
                if (x < item.x + item.size.width &&
                    x + furniture.size.width > item.x &&
                    y < item.y + item.size.height &&
                    y + furniture.size.height > item.y) {
                    return false;
                }
            }
            
            return true;
        }
        
        // ê°€êµ¬ ë°°ì¹˜
        function placeFurniture(x, y, furniture) {
            rooms[gameState.currentRoom].push({
                x: x,
                y: y,
                type: furniture.type,
                emoji: furniture.emoji,
                size: furniture.size,
                cost: furniture.cost
            });
        }
        
        // ë§Œì¡±ë„ ê³„ì‚°
        function calculateSatisfaction() {
            let totalSatisfaction = 0;
            let totalFurniture = 0;
            
            Object.keys(rooms).forEach(roomType => {
                const roomFurniture = rooms[roomType];
                totalFurniture += roomFurniture.length;
                
                // ë°©ë³„ ì ì ˆí•œ ê°€êµ¬ ë³´ë„ˆìŠ¤
                roomFurniture.forEach(furniture => {
                    let bonus = 10; // ê¸°ë³¸ ë§Œì¡±ë„
                    
                    // ë°©ì— ë§ëŠ” ê°€êµ¬ ë³´ë„ˆìŠ¤
                    if (roomType === 'living' && ['sofa', 'tv', 'chair', 'table'].includes(furniture.type)) {
                        bonus += 15;
                    } else if (roomType === 'bedroom' && ['bed', 'wardrobe', 'nightstand'].includes(furniture.type)) {
                        bonus += 15;
                    } else if (roomType === 'kitchen' && ['table', 'fridge', 'stove'].includes(furniture.type)) {
                        bonus += 15;
                    }
                    
                    // ì¥ì‹í’ˆ ë³´ë„ˆìŠ¤
                    if (['plant', 'painting', 'lamp'].includes(furniture.type)) {
                        bonus += 5;
                    }
                    
                    totalSatisfaction += bonus;
                });
                
                // ê°€êµ¬ ì¡°í•© ë³´ë„ˆìŠ¤
                const furnitureTypes = roomFurniture.map(f => f.type);
                if (roomType === 'living' && furnitureTypes.includes('sofa') && furnitureTypes.includes('tv')) {
                    totalSatisfaction += 20;
                }
                if (roomType === 'bedroom' && furnitureTypes.includes('bed') && furnitureTypes.includes('wardrobe')) {
                    totalSatisfaction += 20;
                }
                if (roomType === 'kitchen' && furnitureTypes.includes('fridge') && furnitureTypes.includes('stove')) {
                    totalSatisfaction += 20;
                }
            });
            
            gameState.satisfaction = Math.min(100, Math.floor(totalSatisfaction / Math.max(1, totalFurniture) * 2));
        }
        
        // ë°© ë¹„ìš°ê¸°
        function clearRoom() {
            if (confirm(`${roomNames[gameState.currentRoom]}ì˜ ëª¨ë“  ê°€êµ¬ë¥¼ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                // ì˜ˆì‚° í™˜ë¶ˆ
                rooms[gameState.currentRoom].forEach(furniture => {
                    gameState.budget += Math.floor(furniture.cost * 0.5); // 50% í™˜ë¶ˆ
                    gameState.furnitureCount--;
                });
                
                rooms[gameState.currentRoom] = [];
                calculateSatisfaction();
                updateUI();
            }
        }
        
        // ì €ì¥í•˜ê¸°
        function saveRoom() {
            const roomData = {
                rooms: rooms,
                budget: gameState.budget,
                satisfaction: gameState.satisfaction
            };
            localStorage.setItem('houseDecorator', JSON.stringify(roomData));
            alert('ì§‘ ê¾¸ë¯¸ê¸°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ë§Œì¡±ë„ í™•ì¸
        function showSatisfaction() {
            let message = `í˜„ì¬ ë§Œì¡±ë„: ${gameState.satisfaction}%\n\n`;
            
            Object.keys(rooms).forEach(roomType => {
                const count = rooms[roomType].length;
                message += `${roomNames[roomType]}: ${count}ê°œ ê°€êµ¬\n`;
            });
            
            if (gameState.satisfaction >= 80) {
                message += '\nğŸ‰ í›Œë¥­í•œ ì¸í…Œë¦¬ì–´ì…ë‹ˆë‹¤!';
            } else if (gameState.satisfaction >= 60) {
                message += '\nğŸ˜Š ì¢‹ì€ ì¸í…Œë¦¬ì–´ë„¤ìš”!';
            } else if (gameState.satisfaction >= 40) {
                message += '\nğŸ™‚ ê´œì°®ì€ ì¸í…Œë¦¬ì–´ì…ë‹ˆë‹¤.';
            } else {
                message += '\nğŸ˜ ë” ë§ì€ ê°€êµ¬ê°€ í•„ìš”í•´ìš”.';
            }
            
            alert(message);
        }
        
        // ë Œë”ë§
        function render() {
            // ë°°ê²½
            ctx.fillStyle = roomColors[gameState.currentRoom];
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ê²©ì ê·¸ë¦¬ê¸°
            ctx.strokeStyle = 'rgba(0,0,0,0.1)';
            ctx.lineWidth = 1;
            for (let x = 0; x < canvas.width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y < canvas.height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // ë°© ì´ë¦„ í‘œì‹œ
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(roomNames[gameState.currentRoom], canvas.width / 2, 30);
            
            // í˜„ì¬ ë°©ì˜ ê°€êµ¬ë“¤ ê·¸ë¦¬ê¸°
            const currentRoomFurniture = rooms[gameState.currentRoom];
            currentRoomFurniture.forEach(furniture => {
                // ê°€êµ¬ ë°°ê²½
                ctx.fillStyle = 'rgba(139, 69, 19, 0.3)';
                ctx.fillRect(furniture.x, furniture.y, furniture.size.width, furniture.size.height);
                
                // ê°€êµ¬ í…Œë‘ë¦¬
                ctx.strokeStyle = '#8B4513';
                ctx.lineWidth = 2;
                ctx.strokeRect(furniture.x, furniture.y, furniture.size.width, furniture.size.height);
                
                // ê°€êµ¬ ì´ëª¨ì§€
                ctx.font = `${Math.min(furniture.size.width, furniture.size.height) * 0.6}px Arial`;
                ctx.textAlign = 'center';
                ctx.fillStyle = '#000';
                ctx.fillText(
                    furniture.emoji,
                    furniture.x + furniture.size.width / 2,
                    furniture.y + furniture.size.height / 2 + 5
                );
            });
            
            // ì„ íƒëœ ê°€êµ¬ ë¯¸ë¦¬ë³´ê¸°
            if (gameState.selectedFurniture) {
                ctx.fillStyle = 'rgba(221, 160, 221, 0.5)';
                ctx.fillRect(0, 0, gameState.selectedFurniture.size.width, gameState.selectedFurniture.size.height);
            }
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('budget').textContent = gameState.budget;
            document.getElementById('furnitureCount').textContent = gameState.furnitureCount;
            document.getElementById('satisfaction').textContent = gameState.satisfaction;
        }
        
        // ì €ì¥ëœ ë°ì´í„° ë¡œë“œ
        function loadSavedData() {
            const saved = localStorage.getItem('houseDecorator');
            if (saved) {
                const data = JSON.parse(saved);
                rooms = data.rooms || rooms;
                gameState.budget = data.budget || gameState.budget;
                gameState.satisfaction = data.satisfaction || gameState.satisfaction;
                
                // ê°€êµ¬ ê°œìˆ˜ ê³„ì‚°
                gameState.furnitureCount = 0;
                Object.keys(rooms).forEach(roomType => {
                    gameState.furnitureCount += rooms[roomType].length;
                });
                
                updateUI();
            }
        }
        
        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            render();
            requestAnimationFrame(gameLoop);
        }
        
        // ê²Œì„ ì‹œì‘
        loadSavedData();
        gameLoop();
    </script>
</body>
</html>