<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§® ìˆ˜í•™ í¼ì¦</title>
    
    <!-- Google Analytics -->
    <script src="../../analytics.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #4A90E2, #7B68EE);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        
        .game-container {
            text-align: center;
            background: rgba(0,0,0,0.8);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #4169E1;
            max-width: 800px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }
        
        .ui {
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(65, 105, 225, 0.8);
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .problem-area {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .problem-text {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.5;
            color: #FFD700;
        }
        
        .math-expression {
            font-size: 36px;
            font-weight: bold;
            margin: 20px 0;
            color: #00FF7F;
            font-family: 'Courier New', monospace;
        }
        
        .answer-input {
            font-size: 24px;
            padding: 15px 20px;
            border: 3px solid #4169E1;
            border-radius: 10px;
            text-align: center;
            width: 200px;
            margin: 10px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-weight: bold;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        
        .answer-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .answer-btn {
            background: #32CD32;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .answer-btn:hover {
            background: #228B22;
            transform: scale(1.05);
        }
        
        .answer-btn.correct {
            background: #00FF00;
            animation: correctAnswer 0.5s;
        }
        
        .answer-btn.wrong {
            background: #FF0000;
            animation: wrongAnswer 0.5s;
        }
        
        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        @keyframes wrongAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }
        
        .controls {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #9370DB;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .control-btn:hover {
            background: #8A2BE2;
            transform: scale(1.05);
        }
        
        .difficulty-selector {
            margin: 20px 0;
        }
        
        .difficulty-btn {
            background: #FF6347;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .difficulty-btn.active {
            background: #FF4500;
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.5);
        }
        
        .progress-bar {
            width: 100%;
            height: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #32CD32, #00FF7F);
            width: 0%;
            transition: width 0.5s;
        }
        
        .streak-indicator {
            font-size: 20px;
            margin: 10px 0;
            color: #FFD700;
        }
        
        .feedback {
            font-size: 18px;
            font-weight: bold;
            margin: 15px 0;
            min-height: 25px;
        }
        
        .feedback.correct {
            color: #00FF7F;
        }
        
        .feedback.wrong {
            color: #FF6B6B;
        }
        
        .info {
            margin-top: 20px;
            font-size: 14px;
            color: #ccc;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ§® ìˆ˜í•™ í¼ì¦</h1>
        
        <div class="ui">
            <div class="stat">ğŸ¯ ì •ë‹µ: <span id="correctCount">0</span></div>
            <div class="stat">âŒ ì˜¤ë‹µ: <span id="wrongCount">0</span></div>
            <div class="stat">â­ ì ìˆ˜: <span id="score">0</span></div>
            <div class="stat">â° ì‹œê°„: <span id="timeLeft">60</span>ì´ˆ</div>
        </div>
        
        <div class="streak-indicator">
            ğŸ”¥ ì—°ì† ì •ë‹µ: <span id="streak">0</span>ê°œ
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="difficulty-selector">
            <button class="difficulty-btn active" onclick="setDifficulty('easy')">ì‰¬ì›€ (1ìë¦¬)</button>
            <button class="difficulty-btn" onclick="setDifficulty('medium')">ë³´í†µ (2ìë¦¬)</button>
            <button class="difficulty-btn" onclick="setDifficulty('hard')">ì–´ë ¤ì›€ (3ìë¦¬)</button>
        </div>
        
        <div class="problem-area">
            <div class="problem-text" id="problemText">ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!</div>
            <div class="math-expression" id="mathExpression"></div>
            <input type="number" class="answer-input" id="answerInput" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" style="display: none;">
            <div class="answer-buttons" id="answerButtons" style="display: none;">
                <!-- ì„ íƒì§€ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="controls">
            <button class="control-btn" onclick="startNewGame()">ğŸ® ìƒˆ ê²Œì„</button>
            <button class="control-btn" onclick="skipProblem()">â­ï¸ ë¬¸ì œ ê±´ë„ˆë›°ê¸°</button>
            <button class="control-btn" onclick="showHint()">ğŸ’¡ íŒíŠ¸</button>
            <button class="control-btn" onclick="pauseGame()">â¸ï¸ ì¼ì‹œì •ì§€</button>
        </div>
        
        <div class="info">
            <p>ğŸ® ì¡°ì‘ë²•: ìˆ˜í•™ ë¬¸ì œë¥¼ í’€ê³  ì •ë‹µì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•˜ì„¸ìš”!</p>
            <p>ğŸ’¡ íŒ: ì—°ì†ìœ¼ë¡œ ë§ì¶”ë©´ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ìš”!</p>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            difficulty: 'easy',
            correctCount: 0,
            wrongCount: 0,
            score: 0,
            streak: 0,
            timeLeft: 60,
            gameRunning: false,
            isPaused: false,
            timer: null,
            currentProblem: null,
            problemType: 'multiple'
        };
        
        // ë‚œì´ë„ë³„ ì„¤ì •
        const difficultySettings = {
            easy: { 
                range: [1, 10], 
                operations: ['+', '-'], 
                timeLimit: 60,
                pointsPerCorrect: 10
            },
            medium: { 
                range: [10, 50], 
                operations: ['+', '-', 'Ã—'], 
                timeLimit: 90,
                pointsPerCorrect: 20
            },
            hard: { 
                range: [50, 100], 
                operations: ['+', '-', 'Ã—', 'Ã·'], 
                timeLimit: 120,
                pointsPerCorrect: 30
            }
        };
        
        // ë¬¸ì œ ìœ í˜•
        const problemTypes = [
            'arithmetic',    // ê¸°ë³¸ ì‚¬ì¹™ì—°ì‚°
            'comparison',    // í¬ê¸° ë¹„êµ
            'sequence',      // ìˆ˜ì—´
            'word',          // ë¬¸ì¥ì œ
            'pattern'        // íŒ¨í„´ ì°¾ê¸°
        ];
        
        // ë‚œì´ë„ ì„¤ì •
        function setDifficulty(difficulty) {
            gameState.difficulty = difficulty;
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        // ìƒˆ ê²Œì„ ì‹œì‘
        function startNewGame() {
            const settings = difficultySettings[gameState.difficulty];
            
            gameState.correctCount = 0;
            gameState.wrongCount = 0;
            gameState.score = 0;
            gameState.streak = 0;
            gameState.timeLeft = settings.timeLimit;
            gameState.gameRunning = true;
            gameState.isPaused = false;
            
            generateNewProblem();
            startTimer();
            updateUI();
        }
        
        // ìƒˆ ë¬¸ì œ ìƒì„±
        function generateNewProblem() {
            const settings = difficultySettings[gameState.difficulty];
            const problemType = problemTypes[Math.floor(Math.random() * problemTypes.length)];
            
            switch(problemType) {
                case 'arithmetic':
                    generateArithmeticProblem(settings);
                    break;
                case 'comparison':
                    generateComparisonProblem(settings);
                    break;
                case 'sequence':
                    generateSequenceProblem(settings);
                    break;
                case 'word':
                    generateWordProblem(settings);
                    break;
                case 'pattern':
                    generatePatternProblem(settings);
                    break;
            }
        }
        
        // ì‚¬ì¹™ì—°ì‚° ë¬¸ì œ
        function generateArithmeticProblem(settings) {
            const operation = settings.operations[Math.floor(Math.random() * settings.operations.length)];
            let a = Math.floor(Math.random() * (settings.range[1] - settings.range[0])) + settings.range[0];
            let b = Math.floor(Math.random() * (settings.range[1] - settings.range[0])) + settings.range[0];
            let answer;
            
            // ë‚˜ëˆ—ì…ˆì˜ ê²½ìš° ë‚˜ëˆ„ì–´ë–¨ì–´ì§€ê²Œ ì¡°ì •
            if (operation === 'Ã·') {
                answer = Math.floor(Math.random() * 10) + 1;
                a = answer * b;
            }
            
            switch(operation) {
                case '+': answer = a + b; break;
                case '-': 
                    if (a < b) [a, b] = [b, a]; // ìŒìˆ˜ ë°©ì§€
                    answer = a - b; 
                    break;
                case 'Ã—': answer = a * b; break;
                case 'Ã·': break; // ì´ë¯¸ ê³„ì‚°ë¨
            }
            
            gameState.currentProblem = {
                type: 'arithmetic',
                question: `ë‹¤ìŒ ê³„ì‚°ì˜ ê²°ê³¼ëŠ”?`,
                expression: `${a} ${operation} ${b} = ?`,
                answer: answer,
                choices: generateChoices(answer)
            };
            
            displayProblem();
        }
        
        // í¬ê¸° ë¹„êµ ë¬¸ì œ
        function generateComparisonProblem(settings) {
            const a = Math.floor(Math.random() * settings.range[1]) + 1;
            const b = Math.floor(Math.random() * settings.range[1]) + 1;
            const operations = ['>', '<', '='];
            const correctOp = a > b ? '>' : a < b ? '<' : '=';
            
            gameState.currentProblem = {
                type: 'comparison',
                question: `ë‹¤ìŒ ì¤‘ ì˜¬ë°”ë¥¸ ë¶€ë“±í˜¸ëŠ”?`,
                expression: `${a} ? ${b}`,
                answer: correctOp,
                choices: operations
            };
            
            displayProblem();
        }
        
        // ìˆ˜ì—´ ë¬¸ì œ
        function generateSequenceProblem(settings) {
            const start = Math.floor(Math.random() * 10) + 1;
            const step = Math.floor(Math.random() * 5) + 1;
            const sequence = [start, start + step, start + step * 2, start + step * 3];
            const answer = start + step * 4;
            
            gameState.currentProblem = {
                type: 'sequence',
                question: `ë‹¤ìŒ ìˆ˜ì—´ì—ì„œ ë¹ˆ ì¹¸ì— ë“¤ì–´ê°ˆ ìˆ«ìëŠ”?`,
                expression: `${sequence.join(', ')}, ?`,
                answer: answer,
                choices: generateChoices(answer)
            };
            
            displayProblem();
        }
        
        // ë¬¸ì¥ì œ ë¬¸ì œ
        function generateWordProblem(settings) {
            const scenarios = [
                {
                    text: "ì² ìˆ˜ê°€ ì‚¬íƒ•ì„ {a}ê°œ ê°€ì§€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì˜í¬ê°€ {b}ê°œë¥¼ ë” ì£¼ì—ˆìŠµë‹ˆë‹¤. ì² ìˆ˜ê°€ ê°€ì§„ ì‚¬íƒ•ì€ ëª¨ë‘ ëª‡ ê°œì¼ê¹Œìš”?",
                    operation: (a, b) => a + b
                },
                {
                    text: "ìƒìì— ê³µì´ {a}ê°œ ë“¤ì–´ìˆì—ˆìŠµë‹ˆë‹¤. {b}ê°œë¥¼ êº¼ëƒˆìŠµë‹ˆë‹¤. ìƒìì— ë‚¨ì€ ê³µì€ ëª‡ ê°œì¼ê¹Œìš”?",
                    operation: (a, b) => a - b
                },
                {
                    text: "í•œ ìƒìì— ì—°í•„ì´ {a}ìë£¨ì”© ë“¤ì–´ìˆìŠµë‹ˆë‹¤. {b}ìƒìì—ëŠ” ì—°í•„ì´ ëª¨ë‘ ëª‡ ìë£¨ ë“¤ì–´ìˆì„ê¹Œìš”?",
                    operation: (a, b) => a * b
                }
            ];
            
            const scenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            let a = Math.floor(Math.random() * 20) + 5;
            let b = Math.floor(Math.random() * 10) + 2;
            
            // ëº„ì…ˆì˜ ê²½ìš° ìŒìˆ˜ ë°©ì§€
            if (scenario.operation === ((a, b) => a - b) && a < b) {
                [a, b] = [b, a];
            }
            
            const answer = scenario.operation(a, b);
            const questionText = scenario.text.replace('{a}', a).replace('{b}', b);
            
            gameState.currentProblem = {
                type: 'word',
                question: questionText,
                expression: '',
                answer: answer,
                choices: generateChoices(answer)
            };
            
            displayProblem();
        }
        
        // íŒ¨í„´ ë¬¸ì œ
        function generatePatternProblem(settings) {
            const patterns = [
                { sequence: [2, 4, 6, 8], next: 10, rule: "+2" },
                { sequence: [1, 3, 5, 7], next: 9, rule: "+2" },
                { sequence: [5, 10, 15, 20], next: 25, rule: "+5" },
                { sequence: [1, 2, 4, 8], next: 16, rule: "Ã—2" },
                { sequence: [3, 6, 9, 12], next: 15, rule: "+3" }
            ];
            
            const pattern = patterns[Math.floor(Math.random() * patterns.length)];
            
            gameState.currentProblem = {
                type: 'pattern',
                question: `ë‹¤ìŒ íŒ¨í„´ì—ì„œ ë¹ˆ ì¹¸ì— ë“¤ì–´ê°ˆ ìˆ«ìëŠ”?`,
                expression: `${pattern.sequence.join(', ')}, ?`,
                answer: pattern.next,
                choices: generateChoices(pattern.next)
            };
            
            displayProblem();
        }
        
        // ì„ íƒì§€ ìƒì„±
        function generateChoices(correctAnswer) {
            const choices = [correctAnswer];
            
            while (choices.length < 4) {
                let wrongAnswer;
                if (correctAnswer < 10) {
                    wrongAnswer = Math.floor(Math.random() * 20) + 1;
                } else {
                    wrongAnswer = correctAnswer + (Math.floor(Math.random() * 20) - 10);
                }
                
                if (!choices.includes(wrongAnswer) && wrongAnswer > 0) {
                    choices.push(wrongAnswer);
                }
            }
            
            // ë°°ì—´ ì„ê¸°
            for (let i = choices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [choices[i], choices[j]] = [choices[j], choices[i]];
            }
            
            return choices;
        }
        
        // ë¬¸ì œ í‘œì‹œ
        function displayProblem() {
            const problem = gameState.currentProblem;
            
            document.getElementById('problemText').textContent = problem.question;
            document.getElementById('mathExpression').textContent = problem.expression;
            
            // ì„ íƒì§€ ë²„íŠ¼ ìƒì„±
            const buttonsContainer = document.getElementById('answerButtons');
            buttonsContainer.innerHTML = '';
            buttonsContainer.style.display = 'grid';
            
            if (problem.type === 'comparison') {
                problem.choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.className = 'answer-btn';
                    button.textContent = choice;
                    button.onclick = () => checkAnswer(choice);
                    buttonsContainer.appendChild(button);
                });
            } else {
                problem.choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.className = 'answer-btn';
                    button.textContent = choice;
                    button.onclick = () => checkAnswer(choice);
                    buttonsContainer.appendChild(button);
                });
            }
            
            document.getElementById('answerInput').style.display = 'none';
            document.getElementById('feedback').textContent = '';
        }
        
        // ë‹µ í™•ì¸
        function checkAnswer(selectedAnswer) {
            const problem = gameState.currentProblem;
            const isCorrect = selectedAnswer == problem.answer;
            
            // ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½
            document.querySelectorAll('.answer-btn').forEach(btn => {
                if (btn.textContent == selectedAnswer) {
                    btn.classList.add(isCorrect ? 'correct' : 'wrong');
                } else if (btn.textContent == problem.answer) {
                    btn.classList.add('correct');
                }
                btn.disabled = true;
            });
            
            if (isCorrect) {
                gameState.correctCount++;
                gameState.streak++;
                const basePoints = difficultySettings[gameState.difficulty].pointsPerCorrect;
                const streakBonus = Math.floor(gameState.streak / 3) * 5;
                const points = basePoints + streakBonus;
                gameState.score += points;
                
                document.getElementById('feedback').textContent = `ğŸ‰ ì •ë‹µ! +${points}ì `;
                document.getElementById('feedback').className = 'feedback correct';
            } else {
                gameState.wrongCount++;
                gameState.streak = 0;
                document.getElementById('feedback').textContent = `âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µ: ${problem.answer}`;
                document.getElementById('feedback').className = 'feedback wrong';
            }
            
            updateUI();
            
            // 2ì´ˆ í›„ ë‹¤ìŒ ë¬¸ì œ
            setTimeout(() => {
                if (gameState.gameRunning) {
                    generateNewProblem();
                }
            }, 2000);
        }
        
        // ë¬¸ì œ ê±´ë„ˆë›°ê¸°
        function skipProblem() {
            if (gameState.gameRunning && !gameState.isPaused) {
                gameState.streak = 0;
                document.getElementById('feedback').textContent = 'â­ï¸ ë¬¸ì œë¥¼ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.';
                document.getElementById('feedback').className = 'feedback';
                generateNewProblem();
            }
        }
        
        // íŒíŠ¸ ë³´ê¸°
        function showHint() {
            if (!gameState.currentProblem) return;
            
            const problem = gameState.currentProblem;
            let hint = '';
            
            switch(problem.type) {
                case 'arithmetic':
                    hint = 'ğŸ’¡ ê³„ì‚°ì„ ì°¨ê·¼ì°¨ê·¼ í•´ë³´ì„¸ìš”!';
                    break;
                case 'comparison':
                    hint = 'ğŸ’¡ ë‘ ìˆ«ìì˜ í¬ê¸°ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”!';
                    break;
                case 'sequence':
                    hint = 'ğŸ’¡ ìˆ«ìë“¤ ì‚¬ì´ì˜ ê·œì¹™ì„ ì°¾ì•„ë³´ì„¸ìš”!';
                    break;
                case 'word':
                    hint = 'ğŸ’¡ ë¬¸ì œë¥¼ ì²œì²œíˆ ì½ê³  ì–´ë–¤ ê³„ì‚°ì´ í•„ìš”í•œì§€ ìƒê°í•´ë³´ì„¸ìš”!';
                    break;
                case 'pattern':
                    hint = 'ğŸ’¡ ìˆ«ìë“¤ì´ ì–´ë–¤ ê·œì¹™ìœ¼ë¡œ ì¦ê°€í•˜ëŠ”ì§€ ì°¾ì•„ë³´ì„¸ìš”!';
                    break;
            }
            
            document.getElementById('feedback').textContent = hint;
            document.getElementById('feedback').className = 'feedback';
        }
        
        // ê²Œì„ ì¼ì‹œì •ì§€
        function pauseGame() {
            if (!gameState.gameRunning) return;
            
            gameState.isPaused = !gameState.isPaused;
            
            if (gameState.isPaused) {
                clearInterval(gameState.timer);
                event.target.textContent = 'â–¶ï¸ ê³„ì†í•˜ê¸°';
            } else {
                startTimer();
                event.target.textContent = 'â¸ï¸ ì¼ì‹œì •ì§€';
            }
        }
        
        // íƒ€ì´ë¨¸ ì‹œì‘
        function startTimer() {
            gameState.timer = setInterval(() => {
                if (gameState.gameRunning && !gameState.isPaused) {
                    gameState.timeLeft--;
                    
                    if (gameState.timeLeft <= 0) {
                        gameOver();
                    }
                    
                    updateUI();
                }
            }, 1000);
        }
        
        // ê²Œì„ ì˜¤ë²„
        function gameOver() {
            gameState.gameRunning = false;
            clearInterval(gameState.timer);
            
            const accuracy = gameState.correctCount + gameState.wrongCount > 0 
                ? Math.round((gameState.correctCount / (gameState.correctCount + gameState.wrongCount)) * 100) 
                : 0;
            
            setTimeout(() => {
                alert(`â° ì‹œê°„ ì¢…ë£Œ!\nì •ë‹µ: ${gameState.correctCount}ê°œ\nì˜¤ë‹µ: ${gameState.wrongCount}ê°œ\nì •í™•ë„: ${accuracy}%\nìµœì¢… ì ìˆ˜: ${gameState.score}ì `);
            }, 500);
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('correctCount').textContent = gameState.correctCount;
            document.getElementById('wrongCount').textContent = gameState.wrongCount;
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('timeLeft').textContent = gameState.timeLeft;
            document.getElementById('streak').textContent = gameState.streak;
            
            // ì§„í–‰ë„ ë°” (ì‹œê°„ ê¸°ì¤€)
            const settings = difficultySettings[gameState.difficulty];
            const progress = ((settings.timeLimit - gameState.timeLeft) / settings.timeLimit) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', (e) => {
            if (e.key >= '1' && e.key <= '4' && gameState.currentProblem) {
                const buttons = document.querySelectorAll('.answer-btn');
                const index = parseInt(e.key) - 1;
                if (buttons[index] && !buttons[index].disabled) {
                    buttons[index].click();
                }
            }
        });
        
        // ê²Œì„ ì´ˆê¸°í™”
        document.getElementById('problemText').textContent = 'ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!';
        document.getElementById('mathExpression').textContent = '';
    </script>
</body>
</html>